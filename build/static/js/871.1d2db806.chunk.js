"use strict";(self.webpackChunkyour_app=self.webpackChunkyour_app||[]).push([[871],{1328:function(e,r,t){t.d(r,{Z:function(){return J}});var i=t(885),a=t(2791),_={preview_wrapper:"Tour_preview_wrapper__hzV+e",tour_body:"Tour_tour_body__Z9ac4",preview_breadcrumbs:"Tour_preview_breadcrumbs__fLyKM",tour_sidebar:"Tour_tour_sidebar__2fQeV",tour_sidebar_body:"Tour_tour_sidebar_body__B9Tep",tour_sidebar_header:"Tour_tour_sidebar_header__7tSSr",tour_sidebar_main:"Tour_tour_sidebar_main__etFbR",guarantied_row:"Tour_guarantied_row__6rff0",guarantied_row_guarantied:"Tour_guarantied_row_guarantied__v1pQd",guarantied_row_guarantied_icon:"Tour_guarantied_row_guarantied_icon__bfmYU",guarantied_row_guarantied_text:"Tour_guarantied_row_guarantied_text__9nkpg",price_row:"Tour_price_row__1d8A3",price_row_total_price:"Tour_price_row_total_price__VMjBF",price_row_total_price_total:"Tour_price_row_total_price_total__odbiV",price_row_total_price_discounted:"Tour_price_row_total_price_discounted__-chgf",price_row_daily_price:"Tour_price_row_daily_price__crhxq",price_comment_row:"Tour_price_comment_row__RCkpQ",price_comment_row_more:"Tour_price_comment_row_more__lTx6M",duration_row:"Tour_duration_row__f4Z89",duration_row_col:"Tour_duration_row_col__me4V6",duration_row_icon:"Tour_duration_row_icon__+rNt8",duration_row_text:"Tour_duration_row_text__ZGiQP",duration_row_text_title:"Tour_duration_row_text_title__JrBKF",duration_row_text_data:"Tour_duration_row_text_data__3K2zX",inputs_row:"Tour_inputs_row__BicAy",inputs_row_date_input:"Tour_inputs_row_date_input__punHg",calendar:"Tour_calendar__NaPyA",inputs_row_date_input_text:"Tour_inputs_row_date_input_text__cdHWA",inputs_row_date_input_button:"Tour_inputs_row_date_input_button__IVgSG",inputs_row_date_input_button_minus:"Tour_inputs_row_date_input_button_minus__Ta8JW",inputs_row_button:"Tour_inputs_row_button__o31YK",footer_row_button:"Tour_footer_row_button__4DtcM",inputs_row_text:"Tour_inputs_row_text__DkJJ1",inputs_row_text_heading:"Tour_inputs_row_text_heading__814oP",inputs_row_text_text:"Tour_inputs_row_text_text__jKJBd",tour_sidebar_footer:"Tour_tour_sidebar_footer__BjglX",footer_row_leader:"Tour_footer_row_leader__K+cGy",footer_row_leader_image:"Tour_footer_row_leader_image__xT3Zj",footer_row_leader_leader:"Tour_footer_row_leader_leader__5-W2X",footer_row_leader_name:"Tour_footer_row_leader_name__C3idC",footer_row_leader_rating:"Tour_footer_row_leader_rating__218-t",divider:"Tour_divider__LOuKv"},s=t(364),o=t(7258),n=t(3239),c=t(4554),d=t(4859),u=t(1566),l=t(6531),p=t(2057),m=t(8458),x=t(5417),h=t(6043),w=t(9869),v=t(3165),j=t(5473),g=t(4669),f=t(4768),b=t(140),y=t(8382),N=t(9431),T=t(9741),k=t(7571),Z=t(7538),C=t(6269),A=t(8156),S=t(3618),F=(t(2947),t(3924)),B=t(2018),R=t(184),I={getTourReview:o.R_,add_chat_room:F.q$},J=(0,s.$j)((function(e){return{tour_preview:e.tours.tour_preview,isAuthenticated:e.auth.isAuthenticated}}),I)((function(e){var r=e.tour_preview,t=e.add_chat_room,s=e.isAuthenticated,o=(0,k.k6)(),F=function(){t(r.expert.id),o.push(s?"/account/chat":"/login/chat")},I=(0,a.useState)(1),J=(0,i.Z)(I,2),K=J[0],L=J[1],V=function(){var e=(0,a.useState)(!1),t=(0,i.Z)(e,2),s=t[0],o=t[1];return r&&r.price_comment&&r.price_comment&&(0,R.jsx)(R.Fragment,{children:r&&r.price_comment&&r.price_comment.length<=23?(0,R.jsx)("div",{children:r.price_comment}):(0,R.jsx)(R.Fragment,{children:s?(0,R.jsxs)("div",{children:[r.price_comment+" ",(0,R.jsxs)("div",{className:_.price_comment_row_more,onClick:function(){return o(!1)},children:[" ","\u0441\u043a\u0440\u044b\u0442\u044c"]})]}):(0,R.jsxs)("div",{children:[r.price_comment.slice(0,23)+" ",(0,R.jsxs)("div",{className:_.price_comment_row_more,onClick:function(){return o(!0)},children:[" ","\u043f\u043e\u0434\u0440\u043e\u0431\u043d\u0435\u0435..."]})]})})})};return(0,R.jsxs)(R.Fragment,{children:[r&&(0,R.jsxs)(R.Fragment,{children:[r.wallpaper&&(0,R.jsx)(d.Z,{image:r.wallpaper}),(0,R.jsx)("div",{className:"wrapper",children:(0,R.jsxs)("div",{className:_.preview_wrapper,children:[(0,R.jsxs)("div",{className:_.tour_body,children:[(0,R.jsxs)("div",{className:_.preview_breadcrumbs,children:[(0,R.jsx)(T.rU,{to:"/",children:"\u0413\u043b\u0430\u0432\u043d\u0430\u044f"})," -",(0,R.jsx)(T.rU,{to:"/tours",children:"\u041f\u0443\u0442\u0435\u0448\u0435\u0441\u0442\u0432\u0438\u044f"})," -",(0,R.jsx)("span",{children:"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440 \u0442\u0443\u0440\u0430"})]}),r.name&&(0,R.jsx)(u.Z,{title:r.name,rating:r.rating,reviews:r.reviews_count}),r.start_country&&(0,R.jsx)(l.Z,{country:r.start_country,region:r.start_russian_region?r.start_russian_region:r.start_city}),r.basic_type&&(0,R.jsx)(p.Z,{main_type:r.basic_type,extra_types:r.additional_types}),(0,R.jsx)(m.Z,{comfort:r.comfort_level,difficulty:r.difficulty_level,language:r.languages,age:r.age_starts+"-"+r.age_ends}),(0,R.jsx)("div",{className:_.divider}),r.main_impressions&&r.main_impressions.length>0&&(0,R.jsx)(x.Z,{impressions:r.main_impressions}),(r.plan&&r.plan.length>0||r.media_link)&&(0,R.jsx)(h.Z,{text:r.description,activities:r.plan,video:r&&r.media_link?r.media_link:""}),r.tour_images&&r.tour_images.length>0&&(0,R.jsx)(w.Z,{gallery:r.tour_images}),r.start_date&&r.start_city&&(0,R.jsx)(v.Z,{ya_map:r&&r.map,start_date:r&&r.start_date,start_city:r&&r.start_city,start_time:r&&r.start_time,finish_date:r&&r.finish_date,finish_city:r&&r.finish_city,finish_time:r&&r.finish_time}),Array.isArray(r.tour_days)&&(0,R.jsx)(j.Z,{days:r&&r.tour_days}),(Array.isArray(r.tour_property_types)||Array.isArray(r.tour_property_images))&&(0,R.jsx)(g.Z,{property_types:r.tour_property_types,images:r.tour_property_images}),(r.tour_included_services&&r.tour_included_services.length>0||r.tour_excluded_services&&r.tour_excluded_services.length>0)&&(0,R.jsx)(f.Z,{inclusions:r.tour_included_services,exclusions:r.tour_excluded_services}),r.air_tickets&&(0,R.jsx)(b.Z,{start_date:r&&r.start_date,start_city:r&&r.start_city,start_time:r&&r.start_time,finish_date:r&&r.finish_date,finish_city:r&&r.finish_city,finish_time:r&&r.finish_time,text:r&&r.air_tickets}),r.tour_addetional_services&&(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)("h3",{children:"\u0414\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u0443\u0441\u043b\u0443\u0433\u0438"}),(0,R.jsx)("div",{style:{marginTop:"20px"},children:r&&r.tour_addetional_services&&r.tour_addetional_services.map((function(e,t){return(0,R.jsx)("div",{style:{marginBottom:"10px"},dangerouslySetInnerHTML:{__html:"".concat(e.extra_text," ").concat(e.extra_service_price?" - "+e.extra_service_price+r.currency.sign:"")}},t)}))})]}),(r.guest_requirements||r.take_with||r.key_features||r.new_to_see)&&(0,R.jsx)(N.Z,{guest_requirements:r.guest_requirements,take_with:r.take_with,key_features:r.key_features,new_to_see:r.new_to_see}),r.team_member&&(0,R.jsx)(y.Z,{leader:r.team_member,action:F})]}),(0,R.jsxs)("div",{className:_.tour_sidebar_body,style:{position:"sticky",top:"30px"},children:[(0,R.jsxs)("div",{className:_.tour_sidebar_header,children:[(0,R.jsx)(T.rU,{to:"/register",children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u0443\u0439\u0442\u0435\u0441\u044c!"}),(0,R.jsx)("span",{children:"\u0418 \u043d\u0430\u0447\u043d\u0438\u0442\u0435 \u043f\u0443\u0442\u0435\u0448\u0435\u0441\u0442\u0432\u043e\u0432\u0430\u0442\u044c \u043f\u043e \u043d\u043e\u0432\u043e\u043c\u0443!"})]}),(0,R.jsxs)("div",{className:_.tour_sidebar_main,children:[(0,R.jsxs)("div",{className:_.guarantied_row,children:[(0,R.jsxs)("div",{className:_.guarantied_row_guarantied,children:[(0,R.jsx)("div",{className:_.guarantied_row_guarantied_icon,children:(0,R.jsx)("img",{src:Z.Z,alt:"Ok"})}),(0,R.jsxs)("div",{className:_.guarantied_row_guarantied_text,children:["\u0422\u0443\u0440 \u043f\u0440\u043e\u0432\u0435\u0440\u0435\u043d"," ",r.is_guaranteed?"\u0438 \u0433\u0430\u0440\u0430\u043d\u0442\u0438\u0440\u043e\u0432\u0430\u043d":""]})]}),(0,R.jsx)("div",{className:_.guarantied_row_guarantied_favourite,children:(0,R.jsx)("img",{src:C.Z,alt:"heart"})})]}),r.price&&(0,R.jsxs)("div",{className:_.price_row,children:[r&&r.price&&(0,R.jsxs)("div",{className:_.price_row_total_price,children:[r&&r.discounted_price&&(0,R.jsxs)("div",{className:_.price_row_total_price_total,children:[r&&r.price&&r.price.toLocaleString("ru")," ",(0,R.jsx)("span",{className:"rub-sign",children:"\u20bd"})]}),(0,R.jsxs)("div",{className:_.price_row_total_price_discounted,children:[(r&&r.discounted_price?r.discounted_price:r.price).toLocaleString("ru")," ",(0,R.jsx)("span",{className:"rub-sign",children:"\u20bd"})]})]}),r&&r.daily_price&&(0,R.jsxs)("div",{className:_.price_row_daily_price,children:["\u0432 \u0434\u0435\u043d\u044c"," ",r&&r.daily_price&&(r.daily_price*K).toLocaleString("ru")," ",(0,R.jsx)("span",{className:"rub-sign",children:"\u20bd"})]})]}),(0,R.jsx)("div",{className:_.price_comment_row,children:(0,R.jsx)(V,{})}),(r.duration||r.vacants_number||r.members_number)&&(0,R.jsxs)("div",{className:_.duration_row,children:[(0,R.jsxs)("div",{className:_.duration_row_col,children:[(0,R.jsx)("div",{className:_.duration_row_icon,children:(0,R.jsx)("img",{src:A.Z,alt:"stopwatch"})}),(0,R.jsxs)("div",{className:_.duration_row_text,children:[(0,R.jsx)("div",{className:_.duration_row_text_title,children:"\u0414\u043b\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c:"}),(0,R.jsxs)("div",{className:_.duration_row_text_data,children:[r.duration," ","\u0434\u043d\u0435\u0439"]})]})]}),(0,R.jsxs)("div",{className:_.duration_row_col,children:[(0,R.jsx)("div",{className:_.duration_row_icon,children:(0,R.jsx)("img",{src:S.Z,alt:"group"})}),(0,R.jsxs)("div",{className:_.duration_row_text,children:[(0,R.jsx)("div",{className:_.duration_row_text_title,children:"\u0421\u0432\u043e\u0431\u043e\u0434\u043d\u043e \u043c\u0435\u0441\u0442:"}),(0,R.jsxs)("div",{className:_.duration_row_text_data,children:[r.vacants_number," ","\u0438\u0437"," ",r.members_number]})]})]})]}),(0,R.jsx)("div",{className:_.inputs_row,children:(0,R.jsxs)("div",{className:_.inputs_row_date_input,children:[(0,R.jsx)("div",{className:_.inputs_row_date_input_button_minus,onClick:function(){K>1&&L(K-1)},children:"\u2014"}),(0,R.jsxs)("div",{className:_.inputs_row_date_input_text,children:["\u041c\u0435\u0441\u0442:"," ",K]}),(0,R.jsx)("div",{className:_.inputs_row_date_input_button,onClick:function(){K<r.vacants_number&&L(K+1)},children:"+"})]})}),(0,R.jsx)("div",{className:_.inputs_row_button,children:r.is_guaranteed?"\u0417\u0430\u0431\u0440\u043e\u043d\u0438\u0440\u043e\u0432\u0430\u0442\u044c":"\u0425\u043e\u0447\u0443 \u043f\u043e\u0435\u0445\u0430\u0442\u044c"}),(0,R.jsxs)("div",{className:_.inputs_row_text,children:[r&&r.book_price&&(0,R.jsxs)("div",{className:_.inputs_row_text_heading,children:["\u0414\u043b\u044f \u0431\u0440\u043e\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f \u0442\u0443\u0440\u0430 \u0434\u043e\u0441\u0442\u0430\u0442\u043e\u0447\u043d\u043e ",r&&r.book_price&&(r.book_price*K).toLocaleString("ru"),(0,R.jsx)("span",{className:"rub-sign",children:"\u20bd"})]}),(0,R.jsx)("div",{className:_.inputs_row_text_text,children:"\u041f\u0440\u0438 \u043e\u0442\u043c\u0435\u043d\u0435 \u0431\u0440\u043e\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f \u043b\u044e\u0431\u043e\u0433\u043e \u043f\u0443\u0442\u0435\u0448\u0435\u0441\u0442\u0432\u0438\u044f \u0432 \u0442\u0435\u0447\u0435\u043d\u0438\u0435 24 \u0447\u0430\u0441\u043e\u0432 \u043f\u043e\u0441\u043b\u0435 \u043e\u043f\u043b\u0430\u0442\u044b \u0432\u044b \u043f\u043e\u043b\u0443\u0447\u0430\u0435\u0442\u0435 \u043f\u043e\u043b\u043d\u044b\u0439 \u0432\u043e\u0437\u0432\u0440\u0430\u0442."})]})]}),(0,R.jsxs)("div",{className:_.tour_sidebar_footer,children:[r.expert&&(0,R.jsx)("div",{className:_.footer_row_leader,children:(0,R.jsx)(B.Z,{reviews:r.expert.tour_reviews_count,name:r.expert.first_name,rating:r.expert.rating,id:r.expert.id,avatar:r.expert.tmb_avatar,extra:", \u0410\u0432\u0442\u043e\u0440 \u0442\u0443\u0440\u043e\u0432"})}),(0,R.jsx)("div",{className:_.footer_row_button,onClick:F,children:"\u041d\u0430\u043f\u0438\u0441\u0430\u0442\u044c \u0430\u0432\u0442\u043e\u0440\u0443 \u0442\u0443\u0440\u0430"})]})]})]})})]}),!r&&(0,R.jsx)(c.Z,{sx:{display:"flex",width:"100%",justifyContent:"center",alignItems:"center",height:"300px"},children:(0,R.jsx)(n.Z,{})})]})}))},9871:function(e,r,t){t.r(r),t.d(r,{default:function(){return v}});var i=t(2791),a=t(364),_=t(5861),s=t(885),o=t(7757),n=t.n(o),c=(t(4918),t(863),t(4047),t(8324)),d=t(7258),u=t(4569),l=t.n(u),p=t(184),m={getTourReview:d.R_},x=(0,a.$j)((function(e){return{tour:e.tours.tour_preview}}),m)((function(e){var r=e.children,t=(e.page,e.background),a=void 0===t?"transparent":t,o=e.tour_id,d=e.tour,u=(0,i.useState)(""),m=(0,s.Z)(u,2),x=m[0],h=m[1],w=(0,i.useState)(!1),v=(0,s.Z)(w,2),j=v[0],g=v[1],f=function(){g(!0)},b=function(){var e=(0,_.Z)(n().mark((function e(){var r,t;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={headers:{"Content-Type":"application/json",Authorization:"JWT ".concat(localStorage.getItem("admin_access")),Accept:"application/json"}},t=JSON.stringify({reason:x}),e.prev=2,e.next=5,l().patch("".concat("https://traveler.market","/api/tours/").concat(o,"/decline/\n"),t,r);case 5:window.location.replace("".concat("https://traveler.market","/admin/tours/moderatedtour/")),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(){return e.apply(this,arguments)}}(),y=function(){var e=(0,_.Z)(n().mark((function e(){var r;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={headers:{"Content-Type":"application/json",Authorization:"JWT ".concat(localStorage.getItem("admin_access")),Accept:"application/json"}},null,e.prev=2,e.next=5,l().patch("".concat("https://traveler.market","/api/tours/").concat(o,"/approve/ \n"),null,r);case 5:window.location.replace("".concat("https://traveler.market","/admin/tours/moderatedtour/")),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(){return e.apply(this,arguments)}}();return(0,p.jsx)(p.Fragment,{children:(0,p.jsxs)("section",{children:[j&&(0,p.jsx)(c.Z,{status:"danger",title:"\u041d\u0430\u043f\u0438\u0448\u0438\u0442\u0435 \u043f\u0440\u0438\u0447\u0438\u043d\u0443 \u043e\u0442\u043a\u0430\u0437\u0430",button:"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c",button2:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c",with_field:!0,action:b,input_action:function(e){h(e.target.value)},input_value:x,second_action:function(){return g(!1)},min_width:"500px"}),(0,p.jsxs)("div",{className:"wrapper",children:[(0,p.jsx)("div",{className:"global-h2-heading",style:{marginTop:"50px"},children:(0,p.jsx)("h2",{children:"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440 \u0442\u0443\u0440\u0430"})}),(0,p.jsxs)("div",{className:"control-buttons",children:[(0,p.jsx)("div",{className:"control-buttons-set"}),(0,p.jsxs)("div",{className:"control-buttons-set",children:[(0,p.jsx)("button",{className:"button-green",onClick:y,children:"\u041f\u0440\u0438\u043d\u044f\u0442\u044c"}),(0,p.jsx)("button",{className:"button-red",onClick:f,children:"\u041e\u0442\u043a\u043b\u043e\u043d\u0438\u0442\u044c"})]})]}),(null===d||void 0===d?void 0:d.decline_reasons)&&(0,p.jsxs)("div",{className:"control-buttons",style:{flexDirection:"column"},children:[(0,p.jsx)("h2",{style:{color:"#DF7070",marginBottom:"10px"},children:"\u041e\u0442\u043a\u0430\u0437 \u043f\u0443\u0431\u043b\u0438\u043a\u0430\u0446\u0438\u0438 \u0442\u0443\u0440\u0430!"}),(0,p.jsx)("h3",{style:{marginBottom:"10px"},children:"\u041f\u0440\u0438\u0447\u0438\u043d\u044b:"}),(0,p.jsx)("p",{children:null===d||void 0===d?void 0:d.decline_reasons})]})]}),(0,p.jsx)("main",{style:{backgroundColor:a,zIndex:"0"},children:r}),(0,p.jsx)("div",{className:"wrapper",children:(0,p.jsxs)("div",{className:"control-buttons bottom",children:[(0,p.jsx)("div",{className:"control-buttons-set"}),(0,p.jsxs)("div",{className:"control-buttons-set",children:[(0,p.jsx)("button",{className:"button-green",onClick:y,children:"\u041f\u0440\u0438\u043d\u044f\u0442\u044c"}),(0,p.jsx)("button",{className:"button-red",onClick:f,children:"\u041e\u0442\u043a\u043b\u043e\u043d\u0438\u0442\u044c"})]})]})})]})})})),h=t(1328),w={getTourReview:d.R_},v=(0,a.$j)((function(e){return{}}),w)((function(e){var r=e.location,t=e.match,a=e.getTourReview;(0,i.useEffect)((function(){if(t)return a(t.params.id),function(){a(t.params.id,"reset"),localStorage.removeItem("admin_access")}}),[t]),console.log(null===t||void 0===t?void 0:t.params.id),console.log(r.search.split("=")[1]);var _=r.search.split("=")[1];return localStorage.setItem("admin_access",_),(0,p.jsx)(p.Fragment,{children:(0,p.jsx)(x,{tour_id:null===t||void 0===t?void 0:t.params.id,children:(0,p.jsx)(h.Z,{})})})}))}}]);
//# sourceMappingURL=871.1d2db806.chunk.js.map