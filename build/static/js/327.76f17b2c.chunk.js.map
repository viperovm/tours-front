{"version":3,"file":"static/js/327.76f17b2c.chunk.js","mappings":"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","sources":["layouts/account/account.js","webpack://your-app/./src/pages/account/Chat/Chat.module.css?7e6f","pages/account/Chat/images/read.svg","pages/account/Chat/images/read_not.svg","pages/account/Chat/IsRead.js","pages/account/Chat/Message.js","pages/account/Chat/images/send.svg","pages/account/Chat/MessageForm.js","pages/account/Chat/MessagesList.js","pages/account/Chat/Messages.js","pages/account/Chat/ContactCard.js","pages/account/Chat/ContactsList.js","pages/account/Chat/Chat.js","pages/account/Chat/index.js","redux/actions/chatActions.js","../node_modules/es5-ext/global.js","../node_modules/websocket/lib/browser.js","../node_modules/websocket/lib/version.js"],"sourcesContent":["import React, {useState, useEffect} from 'react'\nimport MainLayout from '../MainLayout'\nimport MetaTags from 'react-meta-tags'\nimport {Link, Redirect} from 'react-router-dom'\n\nimport {connect} from 'react-redux'\nimport SideBar from '../../components/sideBar/SideBar'\n\nimport {load_user} from '../../redux/actions/authActions'\nimport {openSecondaryMenu} from '../../redux/actions/toursActions'\n\nconst Account = ({\n                   title,\n                   subtitle,\n                   menu_item,\n                   isAuthenticated,\n                   children,\n                   tour,\n                   openSecondaryMenu,\n                 }) => {\n\n  console.log(isAuthenticated)\n\n  if (!isAuthenticated) {\n    return <Redirect to='/login'/>\n  }\n\n  if(tour.secondary){\n    openSecondaryMenu(false)\n  }\n\n  const [avatarLetter, setAvatarLetter] = useState('')\n\n  useEffect(() => {\n    load_user()\n  }, [])\n\n  return (\n    <MainLayout>\n      <>\n        <MetaTags>\n          <title>{title}</title>\n          <meta name='description' content=''/>\n          <link rel='icon' href='/favicon.ico'/>\n        </MetaTags>\n\n        <section>\n          <div className='wrapper'>\n            <div className='breadcrumbs breadcrumbs_margin'>\n              <span><Link to='/'>Главная</Link></span> - <span><Link\n              to='/account'>Личный кабинет</Link></span>{subtitle && ' - '}{subtitle && <span><Link\n              to={`/account/${menu_item}`}>{subtitle}</Link></span>}{title && ' - '}<span style={{textDecoration: 'none', pointerEvents: 'none'}}>{title}</span>\n            </div>\n          </div>\n        </section>\n\n        <section>\n          <div className='wrapper'>\n            <div className='account_block'>\n              <SideBar menu_item={menu_item}/>\n              {children}\n            </div>\n          </div>\n        </section>\n      </>\n    </MainLayout>\n  )\n}\n\nconst mapStateToProps = state => ({\n  isAuthenticated: state.auth.isAuthenticated,\n  user: state.auth.user,\n  status: state.auth.status,\n  page: state.auth.page,\n  tour: state.tours.current_tour,\n})\n\nexport default connect(mapStateToProps, {load_user, openSecondaryMenu})(Account)\n","// extracted by mini-css-extract-plugin\nexport default {\"chat_wrapper\":\"Chat_chat_wrapper__-v+H+\",\"chat_contacts\":\"Chat_chat_contacts__aUILl\",\"chat_contact_card\":\"Chat_chat_contact_card__Zowea\",\"active\":\"Chat_active__XeqYQ\",\"first\":\"Chat_first__8CnR6\",\"chat_contact_wrapper\":\"Chat_chat_contact_wrapper__lRGqR\",\"chat_contact_avatar\":\"Chat_chat_contact_avatar__S1eRN\",\"chat_contact_data\":\"Chat_chat_contact_data__LwNEi\",\"chat_contact_name\":\"Chat_chat_contact_name__ZYt-E\",\"chat_contact_last_message\":\"Chat_chat_contact_last_message__5bHE7\",\"chat_contact_last_message_date\":\"Chat_chat_contact_last_message_date__XD1Ru\",\"chat_messages\":\"Chat_chat_messages__d3BPR\",\"chat_messages_messages\":\"Chat_chat_messages_messages__bucsV\",\"message_wrapper\":\"Chat_message_wrapper__vEufx\",\"is_mine\":\"Chat_is_mine__dtak2\",\"user_avatar\":\"Chat_user_avatar__LvJnh\",\"message_body\":\"Chat_message_body__o-Amj\",\"message_header\":\"Chat_message_header__98fCG\",\"message_author_name\":\"Chat_message_author_name__y5cko\",\"message_date_time\":\"Chat_message_date_time__Gr8n0\",\"message_text\":\"Chat_message_text__hK86q\",\"message_status\":\"Chat_message_status__L2Yj2\",\"send_button\":\"Chat_send_button__58LRa\",\"editable_area\":\"Chat_editable_area__hI38S\"};","var _rect, _rect2, _rect3;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgRead(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 16,\n    height: 9,\n    viewBox: \"0 0 16 9\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _rect || (_rect = /*#__PURE__*/React.createElement(\"rect\", {\n    x: 10.0962,\n    width: 2,\n    height: 10,\n    rx: 1,\n    transform: \"rotate(45 10.0962 0)\",\n    fill: \"#84BB59\"\n  })), _rect2 || (_rect2 = /*#__PURE__*/React.createElement(\"rect\", {\n    x: 14.071,\n    width: 2,\n    height: 10,\n    rx: 1,\n    transform: \"rotate(45 14.071 0)\",\n    fill: \"#84BB59\"\n  })), _rect3 || (_rect3 = /*#__PURE__*/React.createElement(\"rect\", {\n    y: 4,\n    width: 2,\n    height: 6,\n    rx: 1,\n    transform: \"rotate(-45 0 4)\",\n    fill: \"#84BB59\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgRead);\nexport default __webpack_public_path__ + \"static/media/read.b04a436fbb2273beb727df41f65dbec8.svg\";\nexport { ForwardRef as ReactComponent };","var _rect, _rect2;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgReadNot(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 16,\n    height: 9,\n    viewBox: \"0 0 16 9\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _rect || (_rect = /*#__PURE__*/React.createElement(\"rect\", {\n    x: 10.0962,\n    width: 2,\n    height: 10,\n    rx: 1,\n    transform: \"rotate(45 10.0962 0)\",\n    fill: \"#84BB59\"\n  })), _rect2 || (_rect2 = /*#__PURE__*/React.createElement(\"rect\", {\n    y: 4,\n    width: 2,\n    height: 6,\n    rx: 1,\n    transform: \"rotate(-45 0 4)\",\n    fill: \"#84BB59\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgReadNot);\nexport default __webpack_public_path__ + \"static/media/read_not.8d47eda62723e55aa33be26f7f9f559b.svg\";\nexport { ForwardRef as ReactComponent };","import React from 'react';\nimport styles from './Chat.module.css';\nimport read from \"./images/read.svg\";\nimport read_not from \"./images/read_not.svg\";\nimport {connect} from \"react-redux\";\n\nconst IsRead = ({is_read, all_messages_read}) => {\n  return (\n    <>\n      <div className={styles.message_status}><img src={is_read || all_messages_read ? read : read_not} alt=\"\"/></div>\n    </>\n  );\n};\n\nconst mapStateToProps = state => ({\n  all_messages_read: state.chat.all_messages_read,\n})\n\nexport default connect(mapStateToProps)(IsRead)","import React, {useEffect, useRef, useState} from 'react';\nimport styles from './Chat.module.css';\nimport read from './images/read.svg'\nimport read_not from './images/read_not.svg'\nimport {connect} from \"react-redux\";\nimport IsRead from \"./IsRead\";\n\nconst Message = ({\n                   data,\n                   author,\n                   user_id,\n                 }) => {\n\n  const [isMine, setIsMine] = useState(false)\n\n  useEffect(() => {\n    if(author?.id === user_id) {\n      setIsMine(true)\n    }\n  })\n\n  const date = new Date(data.time_date)\n\n  return (\n    <>\n      <div className={`${styles.message_wrapper} ${isMine ? styles.is_mine : ''}`}>\n        <div className={styles.user_avatar} style={{backgroundImage: `url(${author?.avatar})`}}/>\n        <div className={styles.message_body}>\n          <div className={styles.message_header}>\n            <div className={styles.message_author_name}>{isMine ? 'Вы' : author?.first_name + ' ' + author?.last_name}</div>\n            <div className={styles.message_date_time}>{data.created_at}</div>\n            {isMine && <IsRead is_read={data.is_read}/>}\n          </div>\n          <div className={styles.message_text} dangerouslySetInnerHTML={{__html: data.message}}/>\n        </div>\n      </div>\n    </>\n  );\n};\n\nexport default Message","var _path;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgSend(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 20,\n    height: 20,\n    viewBox: \"0 0 20 20\",\n    fill: \"#84BB59\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M8.30221 16.2829C8.0502 16.0309 7.64173 16.0309 7.38972 16.2829L5.69942 17.9732C5.44741 18.2248 5.44741 18.6337 5.69942 18.8853C5.94966 19.1364 6.35861 19.1386 6.61191 18.8853L8.30221 17.195C8.55422 16.943 8.55422 16.5345 8.30221 16.2829ZM3.71719 11.6979C3.46558 11.4459 3.05712 11.4459 2.80511 11.6979L1.11481 13.3882C0.862798 13.6402 0.862798 14.0486 1.11481 14.3007C1.36642 14.5522 1.77424 14.5533 2.02689 14.3007L3.71719 12.6104C3.96921 12.3584 3.96921 11.9499 3.71719 11.6979ZM6.77401 13.2261C6.52199 12.9741 6.11353 12.9745 5.86152 13.2261L1.57771 17.5099C1.32569 17.7619 1.32569 18.1704 1.57771 18.4224C1.82964 18.6736 2.23729 18.6745 2.49019 18.4224L6.77401 14.1386C7.02602 13.8866 7.02602 13.4781 6.77401 13.2261ZM19.9674 0.846456L13.8537 19.5559C13.6809 20.084 12.9633 20.161 12.6828 19.6797L8.57156 12.6092C8.44172 12.3862 8.45745 12.1076 8.61108 11.9003L10.0873 9.91286L8.09979 11.389C7.89254 11.5427 7.61391 11.5584 7.39093 11.4286L0.320467 7.31729C-0.159204 7.0383 -0.0854143 6.31968 0.444256 6.14634L19.1537 0.032718C19.6537 -0.130465 20.1313 0.344286 19.9674 0.846456Z\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgSend);\nexport default __webpack_public_path__ + \"static/media/send.929e4d6a84f91e0b008c783e66027df5.svg\";\nexport { ForwardRef as ReactComponent };","import React, {useEffect, useRef, useState} from 'react';\nimport styles from './Chat.module.css';\nimport send from \"./images/send.svg\";\n\nconst MessageForm = ({action}) => {\n\n  const textareaRef = useRef()\n\n  const textareaElement = textareaRef.current;\n\n  const handleSend = (e) => {\n    e.preventDefault();\n    action(message)\n    setMessage('')\n  }\n\n  // useEffect(() => {\n  //   const listener = (event) => {\n  //     if ((event.code === \"Enter\" || event.code === \"NumpadEnter\") && event.metaKey) {\n  //       console.log(message)\n  //       handleSend(event)\n  //     }\n  //   };\n  //   if (textareaElement) {\n  //     document.addEventListener(\"keydown\", listener);\n  //   }\n  //   return () => {\n  //     if (textareaElement) {\n  //       document.removeEventListener(\"keydown\", listener);\n  //     }\n  //   };\n  // }, [textareaElement]);\n\n  const [message, setMessage] = useState('')\n\n  const handleMessageEdit = (e) => {\n    setMessage(e.target.value)\n  }\n\n  return (\n    <>\n      <form onSubmit={handleSend}>\n        {/*<div ref={ref} className={styles.editable_area} contentEditable=\"true\" onChange={(e) => console.log(e.target)}/>*/}\n        <textarea ref={textareaRef} placeholder='Текст сообщения' onChange={handleMessageEdit} value={message}/>\n        <button type='submit'><img src={send} alt=\"\"/></button>\n      </form>\n    </>\n  );\n};\n\nexport default MessageForm;","import React, {useEffect, useRef} from 'react';\nimport styles from './Chat.module.css';\nimport Message from \"./Message\";\nimport {connect} from \"react-redux\";\n\nconst MessagesList = ({current_messages, user}) => {\n\n  const scrollRef = useRef(null);\n\n  // useEffect(() => {\n  //   scrollRef.current?.scrollIntoView({ behavior: \"smooth\" });\n  // }, [current_messages]);\n\n  useEffect(() => {\n    if (scrollRef) {\n      scrollRef.current.addEventListener('DOMNodeInserted', event => {\n        const { currentTarget: target } = event;\n        target.scroll({ top: target.scrollHeight, behavior: 'smooth' });\n      });\n    }\n  }, [current_messages]);\n\n  return (\n    <>\n      <div ref={scrollRef} className={styles.chat_messages_messages}>\n        {current_messages?.map((i, n) => <Message key={n} data={i} author={i.author} user_id={user.id}/>)}\n      </div>\n    </>\n  );\n};\n\nconst mapStateToProps = state => ({\n  user: state.auth.user,\n  current_messages: state.chat.current_messages,\n})\n\nexport default connect(mapStateToProps)(MessagesList)","import React, {useState, useEffect} from 'react';\nimport {connect} from \"react-redux\";\nimport styles from './Chat.module.css';\nimport Message from \"./Message\";\nimport avatar4 from \"./images/avatar4.png\";\nimport {w3cwebsocket as W3CWebSocket} from \"websocket\";\nimport send from \"./images/send.svg\";\nimport MessageForm from \"./MessageForm\";\nimport {\n  set_current_messages,\n  clear_current_messages,\n  set_all_messages_read,\n  set_all_messages_unread,\n} from \"../../../redux/actions/chatActions\";\nimport MessagesList from \"./MessagesList\";\n\nconst Messages = ({\n                    current_room,\n                    set_current_messages,\n                    clear_current_messages,\n                    set_all_messages_read,\n                    set_all_messages_unread,\n                  }) => {\n\n  const client = current_room ?\n    new W3CWebSocket(`wss://traveler.market/ws/chat/${current_room}/?token=${localStorage.getItem('access')}`)\n    :\n    null\n  ;\n\n  useEffect(() => {\n    return () => {\n      clear_current_messages()\n      client?.close()\n    }\n  })\n\n  useEffect(() => {\n    if (client) {\n      client.onopen = () => {\n        console.log('WebSocket Client Connected');\n      };\n\n      client.onclose = () => {\n        console.log('WebSocket Client Disconnected');\n      };\n\n      client.onerror = (e) => {\n        console.error(e);\n        console.log('Connection Error');\n      };\n\n      client.onmessage = (e) => {\n        const dataFromServer = JSON.parse(e.data);\n        // console.log('got reply!');\n        if (dataFromServer) {\n          if (dataFromServer?.command === 'set_read') {\n            set_all_messages_read()\n          } else if (dataFromServer?.command === 'set_unread') {\n            set_all_messages_unread()\n          } else {\n            set_current_messages(dataFromServer)\n          }\n        }\n      };\n    }\n  }, [client])\n\n  // console.log(current_room)\n\n\n  const handleSend = (message) => {\n    client.send(JSON.stringify({\n      message: message\n    }));\n    // set_current_messages({\n    //   author:\n    //     {\n    //       id: user.id,\n    //       avatar: user.avatar\n    //     },\n    //   message: message,\n    //   time_date: Date.now(),\n    // })\n  }\n\n  return (\n    <>\n      <div className={styles.chat_messages}>\n        <MessagesList/>\n        <div className={styles.send_button}>\n          <MessageForm action={handleSend}/>\n        </div>\n      </div>\n    </>\n  );\n};\n\nconst mapStateToProps = state => ({\n  chat_rooms: state.chat.chat_rooms,\n  current_room: state.chat.current_room,\n})\n\nconst mapDispatchToProps = {\n  set_current_messages,\n  clear_current_messages,\n  set_all_messages_read,\n  set_all_messages_unread,\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Messages)","import React from 'react';\nimport styles from './Chat.module.css';\nimport wallpaper from \"../../Blog/images/wallpaper.png\";\nimport {truncateText} from \"../../../functions\";\n\nconst ContactCard = ({room, action, active = false, first = false, }) => {\n\n  const {\n    id,\n    last_message,\n  } = room\n\n  const {\n    avatar,\n    first_name,\n    last_name,\n    last_message_date,\n  } = room.room_members[0]\n\n  const handleClick = () => {\n    action(id)\n  }\n\n  return (\n    <>\n      <div className={`${styles.chat_contact_card} ${active ? styles.active : ''} ${first ? styles.first : ''}`} onClick={handleClick}>\n        <div className={styles.chat_contact_wrapper}>\n          <div className={styles.chat_contact_avatar} style={{backgroundImage: `url(${avatar})`}}/>\n          <div className={styles.chat_contact_data}>\n            <div className={styles.chat_contact_name}>{first_name + ' ' + last_name[0]}</div>\n            <div className={styles.chat_contact_last_message}>{truncateText(room?.last_message, 20)}</div>\n          </div>\n        </div>\n        <div className={styles.chat_contact_last_message_date}>{last_message_date}</div>\n      </div>\n    </>\n  );\n};\n\nexport default ContactCard;","import React from 'react';\nimport styles from './Chat.module.css';\nimport ContactCard from \"./ContactCard\";\nimport {connect} from \"react-redux\";\nimport {\n  set_current_room,\n  delete_chat_user,\n  clear_current_room,\n  set_all_messages_unread,\n} from \"../../../redux/actions/chatActions\";\n\nconst ContactsList = ({\n                        chat_rooms,\n                        current_room,\n                        set_current_room,\n                        delete_chat_user,\n                        clear_current_room,\n                        set_all_messages_unread,\n                      }) => {\n  const handleCurrentRoom = (id) => {\n    delete_chat_user()\n    clear_current_room()\n    set_all_messages_unread()\n    set_current_room(id)\n  }\n  return (\n    <>\n      <div className={styles.chat_contacts}>\n        {chat_rooms?.map((i, n) => <ContactCard key={n} room={i} action={handleCurrentRoom} active={current_room === i.id} first={n === 0}/>)}\n      </div>\n    </>\n  );\n};\n\nconst mapStateToProps = state => ({\n  chat_rooms: state.chat.chat_rooms,\n  current_room: state.chat.current_room,\n})\n\nexport default connect(mapStateToProps, {\n  set_current_room,\n  delete_chat_user,\n  clear_current_room,\n  set_all_messages_unread,\n})(ContactsList);","import React, {useEffect, useRef, useState} from 'react'\nimport styles from './Chat.module.css'\nimport {connect} from 'react-redux'\nimport Account from \"../../../layouts/account/account\";\nimport {\n  clear_current_room,\n  delete_chat_user,\n  get_chat_rooms,\n  set_all_messages_unread,\n} from \"../../../redux/actions/chatActions\";\nimport Messages from \"./Messages\";\nimport ContactsList from \"./ContactsList\";\n\nconst Chat = ({get_chat_rooms, delete_chat_user, clear_current_room, set_all_messages_unread}) => {\n\n  useEffect(() => {\n    window.scrollTo(0, 0)\n  }, [])\n\n  useEffect(() => {\n    get_chat_rooms()\n    return () => {\n      delete_chat_user()\n      clear_current_room()\n      set_all_messages_unread()\n    }\n  }, [])\n\n  return (\n    <>\n      <Account title='Чат' menu_item='chat'>\n\n        <div className={styles.chat_wrapper}>\n          <ContactsList/>\n          <Messages/>\n        </div>\n\n      </Account>\n    </>\n  )\n}\n\nconst mapDispatchToProps = {get_chat_rooms, delete_chat_user, clear_current_room, set_all_messages_unread}\n\nexport default connect(null, mapDispatchToProps)(Chat)","import Chat from './Chat'\n\nexport default Chat","import * as t from '../types'\nimport axios from 'axios'\nimport {\n  GET_DATA_BY_BIK_FAIL, SET_ALL_MESSAGES_UNREAD,\n} from \"../types\";\n\nexport const add_chat_user = data => async dispatch => {\n  dispatch({\n    type: t.ADD_CHAT_USER,\n    payload: data,\n  })\n}\n\nexport const delete_chat_user = () => async dispatch => {\n  dispatch({\n    type: t.DELETE_CHAT_USER,\n  })\n}\n\nexport const get_chat_rooms = () => async dispatch => {\n  const config = {\n    headers: {\n      'Content-Type': 'application/json',\n      Authorization: `JWT ${localStorage.getItem('access')}`,\n      Accept: 'application/json',\n    },\n  }\n\n  try {\n    const res = await axios.get(`${process.env.REACT_APP_API_URL}/api/chats/`, config)\n\n    dispatch({\n      type: t.GET_CHAT_ROOMS_SUCCESS,\n      payload: res.data,\n    })\n\n  } catch (err) {\n    console.error(err)\n    dispatch({\n      type: t.GET_CHAT_ROOMS_FAIL,\n      payload: err.response.data,\n    })\n  }\n}\n\nexport const add_chat_room = id => async dispatch => {\n  const config = {\n    headers: {\n      'Content-Type': 'application/json',\n      Authorization: `JWT ${localStorage.getItem('access')}`,\n      Accept: 'application/json',\n    },\n  }\n\n  const body = JSON.stringify({chat_with: id})\n\n  try {\n    const rooms = await axios.get(`${process.env.REACT_APP_API_URL}/api/chats/`, config)\n    const room = await axios.post(`${process.env.REACT_APP_API_URL}/api/chats/`, body, config)\n\n    const data = rooms.data.filter(item => item.id !== room.data.id)\n\n    const payload = {\n      data: [room.data, ...data ],\n      id: room.data.id\n    }\n\n    dispatch({\n      type: t.ADD_CHAT_ROOM_SUCCESS,\n      payload: payload,\n    })\n\n  } catch (err) {\n    console.error(err)\n    dispatch({\n      type: t.ADD_CHAT_ROOM_FAIL,\n      payload: err.response.data,\n    })\n  }\n}\n\nexport const set_current_room = id => async dispatch => {\n  dispatch({\n    type: t.SET_CURRENT_ROOM,\n    payload: id,\n  })\n}\n\nexport const clear_current_room = () => async dispatch => {\n  dispatch({\n    type: t.CLEAR_CURRENT_ROOM,\n  })\n}\n\nexport const set_current_messages = data => async dispatch => {\n  dispatch({\n    type: t.SET_CURRENT_MESSAGES,\n    payload: data,\n  })\n}\n\nexport const set_all_messages_read = () => async dispatch => {\n  dispatch({\n    type: t.SET_ALL_MESSAGES_READ,\n  })\n}\n\nexport const set_all_messages_unread = () => async dispatch => {\n  dispatch({\n    type: t.SET_ALL_MESSAGES_UNREAD,\n  })\n}\n\nexport const clear_current_messages = () => async dispatch => {\n  dispatch({\n    type: t.CLEAR_CURRENT_MESSAGES,\n  })\n}\n\n\n","var naiveFallback = function () {\n\tif (typeof self === \"object\" && self) return self;\n\tif (typeof window === \"object\" && window) return window;\n\tthrow new Error(\"Unable to resolve global `this`\");\n};\n\nmodule.exports = (function () {\n\tif (this) return this;\n\n\t// Unexpected strict mode (may happen if e.g. bundled into ESM module)\n\n\t// Fallback to standard globalThis if available\n\tif (typeof globalThis === \"object\" && globalThis) return globalThis;\n\n\t// Thanks @mathiasbynens -> https://mathiasbynens.be/notes/globalthis\n\t// In all ES5+ engines global object inherits from Object.prototype\n\t// (if you approached one that doesn't please report)\n\ttry {\n\t\tObject.defineProperty(Object.prototype, \"__global__\", {\n\t\t\tget: function () { return this; },\n\t\t\tconfigurable: true\n\t\t});\n\t} catch (error) {\n\t\t// Unfortunate case of updates to Object.prototype being restricted\n\t\t// via preventExtensions, seal or freeze\n\t\treturn naiveFallback();\n\t}\n\ttry {\n\t\t// Safari case (window.__global__ works, but __global__ does not)\n\t\tif (!__global__) return naiveFallback();\n\t\treturn __global__;\n\t} finally {\n\t\tdelete Object.prototype.__global__;\n\t}\n})();\n","var _globalThis;\nif (typeof globalThis === 'object') {\n\t_globalThis = globalThis;\n} else {\n\ttry {\n\t\t_globalThis = require('es5-ext/global');\n\t} catch (error) {\n\t} finally {\n\t\tif (!_globalThis && typeof window !== 'undefined') { _globalThis = window; }\n\t\tif (!_globalThis) { throw new Error('Could not determine global this'); }\n\t}\n}\n\nvar NativeWebSocket = _globalThis.WebSocket || _globalThis.MozWebSocket;\nvar websocket_version = require('./version');\n\n\n/**\n * Expose a W3C WebSocket class with just one or two arguments.\n */\nfunction W3CWebSocket(uri, protocols) {\n\tvar native_instance;\n\n\tif (protocols) {\n\t\tnative_instance = new NativeWebSocket(uri, protocols);\n\t}\n\telse {\n\t\tnative_instance = new NativeWebSocket(uri);\n\t}\n\n\t/**\n\t * 'native_instance' is an instance of nativeWebSocket (the browser's WebSocket\n\t * class). Since it is an Object it will be returned as it is when creating an\n\t * instance of W3CWebSocket via 'new W3CWebSocket()'.\n\t *\n\t * ECMAScript 5: http://bclary.com/2004/11/07/#a-13.2.2\n\t */\n\treturn native_instance;\n}\nif (NativeWebSocket) {\n\t['CONNECTING', 'OPEN', 'CLOSING', 'CLOSED'].forEach(function(prop) {\n\t\tObject.defineProperty(W3CWebSocket, prop, {\n\t\t\tget: function() { return NativeWebSocket[prop]; }\n\t\t});\n\t});\n}\n\n/**\n * Module exports.\n */\nmodule.exports = {\n    'w3cwebsocket' : NativeWebSocket ? W3CWebSocket : null,\n    'version'      : websocket_version\n};\n","module.exports = require('../package.json').version;\n"],"names":["connect","state","isAuthenticated","auth","user","status","page","tour","tours","current_tour","load_user","openSecondaryMenu","title","subtitle","menu_item","children","console","log","to","secondary","useState","useEffect","name","content","rel","href","className","style","textDecoration","pointerEvents","all_messages_read","chat","is_read","styles","src","read","read_not","alt","data","author","user_id","isMine","setIsMine","id","Date","time_date","backgroundImage","avatar","first_name","last_name","created_at","dangerouslySetInnerHTML","__html","message","action","textareaRef","useRef","current","setMessage","onSubmit","e","preventDefault","ref","placeholder","onChange","target","value","type","send","current_messages","scrollRef","addEventListener","event","currentTarget","scroll","top","scrollHeight","behavior","map","i","n","mapDispatchToProps","set_current_messages","clear_current_messages","set_all_messages_read","set_all_messages_unread","chat_rooms","current_room","client","W3CWebSocket","localStorage","getItem","close","onopen","onclose","onerror","error","onmessage","dataFromServer","JSON","parse","command","stringify","room","active","first","last_message","room_members","last_message_date","onClick","truncateText","set_current_room","delete_chat_user","clear_current_room","handleCurrentRoom","get_chat_rooms","window","scrollTo","add_chat_user","dispatch","t","payload","config","headers","Authorization","Accept","axios","process","res","response","add_chat_room","body","chat_with","rooms","filter","item","naiveFallback","self","Error","module","exports","this","globalThis","Object","defineProperty","prototype","get","configurable","__global__","_globalThis","require","NativeWebSocket","WebSocket","MozWebSocket","websocket_version","uri","protocols","forEach","prop"],"sourceRoot":""}