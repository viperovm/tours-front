{"version":3,"file":"static/js/327.3bb42083.chunk.js","mappings":"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","sources":["layouts/account/account.js","webpack://your-app/./src/pages/account/Chat/Chat.module.css?7e6f","pages/account/Chat/images/read.svg","pages/account/Chat/images/read_not.svg","pages/account/Chat/IsRead.js","pages/account/Chat/Message.js","pages/account/Chat/images/send.svg","pages/account/Chat/MessageForm.js","pages/account/Chat/MessagesList.js","pages/account/Chat/Messages.js","pages/account/Chat/ContactCard.js","pages/account/Chat/ContactsList.js","pages/account/Chat/Chat.js","pages/account/Chat/index.js"],"sourcesContent":["import React, {useState, useEffect} from 'react'\nimport MainLayout from '../MainLayout'\nimport MetaTags from 'react-meta-tags'\nimport {Link, Redirect} from 'react-router-dom'\n\nimport {connect} from 'react-redux'\nimport SideBar from '../../components/sideBar/SideBar'\n\nimport {load_user} from '../../redux/actions/authActions'\nimport {openSecondaryMenu} from '../../redux/actions/toursActions'\n\nconst Account = ({\n                   title,\n                   subtitle,\n                   menu_item,\n                   isAuthenticated,\n                   children,\n                   tour,\n                   openSecondaryMenu,\n                 }) => {\n\n  console.log(isAuthenticated)\n\n  if (!isAuthenticated) {\n    return <Redirect to='/login'/>\n  }\n\n  if(tour.secondary){\n    openSecondaryMenu(false)\n  }\n\n  const [avatarLetter, setAvatarLetter] = useState('')\n\n  useEffect(() => {\n    load_user()\n  }, [])\n\n  return (\n    <MainLayout>\n      <>\n        <MetaTags>\n          <title>{title}</title>\n          <meta name='description' content=''/>\n          <link rel='icon' href='/favicon.ico'/>\n        </MetaTags>\n\n        <section>\n          <div className='wrapper'>\n            <div className='breadcrumbs breadcrumbs_margin'>\n              <span><Link to='/'>Главная</Link></span> - <span><Link\n              to='/account'>Личный кабинет</Link></span>{subtitle && ' - '}{subtitle && <span><Link\n              to={`/account/${menu_item}`}>{subtitle}</Link></span>}{title && ' - '}<span style={{textDecoration: 'none', pointerEvents: 'none'}}>{title}</span>\n            </div>\n          </div>\n        </section>\n\n        <section>\n          <div className='wrapper'>\n            <div className='account_block'>\n              <SideBar menu_item={menu_item}/>\n              {children}\n            </div>\n          </div>\n        </section>\n      </>\n    </MainLayout>\n  )\n}\n\nconst mapStateToProps = state => ({\n  isAuthenticated: state.auth.isAuthenticated,\n  user: state.auth.user,\n  status: state.auth.status,\n  page: state.auth.page,\n  tour: state.tours.current_tour,\n})\n\nexport default connect(mapStateToProps, {load_user, openSecondaryMenu})(Account)\n","// extracted by mini-css-extract-plugin\nexport default {\"chat_wrapper\":\"Chat_chat_wrapper__-v+H+\",\"chat_contacts\":\"Chat_chat_contacts__aUILl\",\"chat_contact_card\":\"Chat_chat_contact_card__Zowea\",\"active\":\"Chat_active__XeqYQ\",\"first\":\"Chat_first__8CnR6\",\"chat_contact_wrapper\":\"Chat_chat_contact_wrapper__lRGqR\",\"chat_contact_avatar\":\"Chat_chat_contact_avatar__S1eRN\",\"active_user\":\"Chat_active_user__51HJ4\",\"chat_contact_data\":\"Chat_chat_contact_data__LwNEi\",\"chat_contact_name\":\"Chat_chat_contact_name__ZYt-E\",\"chat_contact_last_message\":\"Chat_chat_contact_last_message__5bHE7\",\"chat_contact_last_message_date\":\"Chat_chat_contact_last_message_date__XD1Ru\",\"chat_messages\":\"Chat_chat_messages__d3BPR\",\"chat_messages_messages\":\"Chat_chat_messages_messages__bucsV\",\"message_wrapper\":\"Chat_message_wrapper__vEufx\",\"is_mine\":\"Chat_is_mine__dtak2\",\"user_avatar\":\"Chat_user_avatar__LvJnh\",\"message_body\":\"Chat_message_body__o-Amj\",\"message_header\":\"Chat_message_header__98fCG\",\"message_author_name\":\"Chat_message_author_name__y5cko\",\"message_date_time\":\"Chat_message_date_time__Gr8n0\",\"message_text\":\"Chat_message_text__hK86q\",\"message_status\":\"Chat_message_status__L2Yj2\",\"send_button\":\"Chat_send_button__58LRa\",\"editable_area\":\"Chat_editable_area__hI38S\"};","var _rect, _rect2, _rect3;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgRead(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 16,\n    height: 9,\n    viewBox: \"0 0 16 9\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _rect || (_rect = /*#__PURE__*/React.createElement(\"rect\", {\n    x: 10.0962,\n    width: 2,\n    height: 10,\n    rx: 1,\n    transform: \"rotate(45 10.0962 0)\",\n    fill: \"#84BB59\"\n  })), _rect2 || (_rect2 = /*#__PURE__*/React.createElement(\"rect\", {\n    x: 14.071,\n    width: 2,\n    height: 10,\n    rx: 1,\n    transform: \"rotate(45 14.071 0)\",\n    fill: \"#84BB59\"\n  })), _rect3 || (_rect3 = /*#__PURE__*/React.createElement(\"rect\", {\n    y: 4,\n    width: 2,\n    height: 6,\n    rx: 1,\n    transform: \"rotate(-45 0 4)\",\n    fill: \"#84BB59\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgRead);\nexport default __webpack_public_path__ + \"static/media/read.b04a436fbb2273beb727df41f65dbec8.svg\";\nexport { ForwardRef as ReactComponent };","var _rect, _rect2;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgReadNot(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 16,\n    height: 9,\n    viewBox: \"0 0 16 9\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _rect || (_rect = /*#__PURE__*/React.createElement(\"rect\", {\n    x: 10.0962,\n    width: 2,\n    height: 10,\n    rx: 1,\n    transform: \"rotate(45 10.0962 0)\",\n    fill: \"#84BB59\"\n  })), _rect2 || (_rect2 = /*#__PURE__*/React.createElement(\"rect\", {\n    y: 4,\n    width: 2,\n    height: 6,\n    rx: 1,\n    transform: \"rotate(-45 0 4)\",\n    fill: \"#84BB59\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgReadNot);\nexport default __webpack_public_path__ + \"static/media/read_not.8d47eda62723e55aa33be26f7f9f559b.svg\";\nexport { ForwardRef as ReactComponent };","import React from 'react';\nimport styles from './Chat.module.css';\nimport read from \"./images/read.svg\";\nimport read_not from \"./images/read_not.svg\";\nimport {connect} from \"react-redux\";\n\nconst IsRead = ({is_read, all_messages_read}) => {\n  return (\n    <>\n      <div className={styles.message_status}><img src={is_read || all_messages_read ? read : read_not} alt=\"\"/></div>\n    </>\n  );\n};\n\nconst mapStateToProps = state => ({\n  all_messages_read: state.chat.all_messages_read,\n})\n\nexport default connect(mapStateToProps)(IsRead)","import React, {useEffect, useRef, useState} from 'react';\nimport styles from './Chat.module.css';\nimport read from './images/read.svg'\nimport read_not from './images/read_not.svg'\nimport {connect} from \"react-redux\";\nimport IsRead from \"./IsRead\";\n\nconst Message = ({\n                   data,\n                   author,\n                   user_id,\n                 }) => {\n\n  const [isMine, setIsMine] = useState(false)\n\n  useEffect(() => {\n    if(author?.id === user_id) {\n      setIsMine(true)\n    }\n  })\n\n  const date = new Date(data.time_date)\n\n  return (\n    <>\n      <div className={`${styles.message_wrapper} ${isMine ? styles.is_mine : ''}`}>\n        <div className={styles.user_avatar} style={{backgroundImage: `url(${author?.avatar})`}}/>\n        <div className={styles.message_body}>\n          <div className={styles.message_header}>\n            <div className={styles.message_author_name}>{isMine ? 'Вы' : author?.first_name + ' ' + author?.last_name}</div>\n            <div className={styles.message_date_time}>{data.created_at}</div>\n            {isMine && <IsRead is_read={data.is_read}/>}\n          </div>\n          <div className={styles.message_text} dangerouslySetInnerHTML={{__html: data.message}}/>\n        </div>\n      </div>\n    </>\n  );\n};\n\nexport default Message","var _path;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgSend(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 20,\n    height: 20,\n    viewBox: \"0 0 20 20\",\n    fill: \"#84BB59\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M8.30221 16.2829C8.0502 16.0309 7.64173 16.0309 7.38972 16.2829L5.69942 17.9732C5.44741 18.2248 5.44741 18.6337 5.69942 18.8853C5.94966 19.1364 6.35861 19.1386 6.61191 18.8853L8.30221 17.195C8.55422 16.943 8.55422 16.5345 8.30221 16.2829ZM3.71719 11.6979C3.46558 11.4459 3.05712 11.4459 2.80511 11.6979L1.11481 13.3882C0.862798 13.6402 0.862798 14.0486 1.11481 14.3007C1.36642 14.5522 1.77424 14.5533 2.02689 14.3007L3.71719 12.6104C3.96921 12.3584 3.96921 11.9499 3.71719 11.6979ZM6.77401 13.2261C6.52199 12.9741 6.11353 12.9745 5.86152 13.2261L1.57771 17.5099C1.32569 17.7619 1.32569 18.1704 1.57771 18.4224C1.82964 18.6736 2.23729 18.6745 2.49019 18.4224L6.77401 14.1386C7.02602 13.8866 7.02602 13.4781 6.77401 13.2261ZM19.9674 0.846456L13.8537 19.5559C13.6809 20.084 12.9633 20.161 12.6828 19.6797L8.57156 12.6092C8.44172 12.3862 8.45745 12.1076 8.61108 11.9003L10.0873 9.91286L8.09979 11.389C7.89254 11.5427 7.61391 11.5584 7.39093 11.4286L0.320467 7.31729C-0.159204 7.0383 -0.0854143 6.31968 0.444256 6.14634L19.1537 0.032718C19.6537 -0.130465 20.1313 0.344286 19.9674 0.846456Z\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgSend);\nexport default __webpack_public_path__ + \"static/media/send.929e4d6a84f91e0b008c783e66027df5.svg\";\nexport { ForwardRef as ReactComponent };","import React, {useEffect, useRef, useState} from 'react';\nimport styles from './Chat.module.css';\nimport send from \"./images/send.svg\";\n\nconst MessageForm = ({action}) => {\n\n  const textareaRef = useRef()\n\n  const textareaElement = textareaRef.current;\n\n  const handleSend = (e) => {\n    e.preventDefault();\n    action(message)\n    setMessage('')\n  }\n\n  // useEffect(() => {\n  //   const listener = (event) => {\n  //     if ((event.code === \"Enter\" || event.code === \"NumpadEnter\") && event.metaKey) {\n  //       console.log(message)\n  //       handleSend(event)\n  //     }\n  //   };\n  //   if (textareaElement) {\n  //     document.addEventListener(\"keydown\", listener);\n  //   }\n  //   return () => {\n  //     if (textareaElement) {\n  //       document.removeEventListener(\"keydown\", listener);\n  //     }\n  //   };\n  // }, [textareaElement]);\n\n  const [message, setMessage] = useState('')\n\n  const handleMessageEdit = (e) => {\n    setMessage(e.target.value)\n  }\n\n  return (\n    <>\n      <form onSubmit={handleSend}>\n        {/*<div ref={ref} className={styles.editable_area} contentEditable=\"true\" onChange={(e) => console.log(e.target)}/>*/}\n        <textarea ref={textareaRef} placeholder='Текст сообщения' onChange={handleMessageEdit} value={message}/>\n        <button type='submit'><img src={send} alt=\"\"/></button>\n      </form>\n    </>\n  );\n};\n\nexport default MessageForm;","import React, {useEffect, useRef} from 'react';\nimport styles from './Chat.module.css';\nimport Message from \"./Message\";\nimport {connect} from \"react-redux\";\n\nconst MessagesList = ({current_messages, user}) => {\n\n  const scrollRef = useRef(null);\n\n  // useEffect(() => {\n  //   scrollRef.current?.scrollIntoView({ behavior: \"smooth\" });\n  // }, [current_messages]);\n\n  useEffect(() => {\n    if (scrollRef) {\n      scrollRef.current.addEventListener('DOMNodeInserted', event => {\n        const { currentTarget: target } = event;\n        target.scroll({ top: target.scrollHeight, behavior: 'smooth' });\n      });\n    }\n  }, [current_messages]);\n\n  return (\n    <>\n      <div ref={scrollRef} className={styles.chat_messages_messages}>\n        {current_messages?.map((i, n) => <Message key={n} data={i} author={i.author} user_id={user.id}/>)}\n      </div>\n    </>\n  );\n};\n\nconst mapStateToProps = state => ({\n  user: state.auth.user,\n  current_messages: state.chat.current_messages,\n})\n\nexport default connect(mapStateToProps)(MessagesList)","import React, {useState, useEffect} from 'react';\nimport {connect} from \"react-redux\";\nimport styles from './Chat.module.css';\nimport Message from \"./Message\";\nimport avatar4 from \"./images/avatar4.png\";\nimport {w3cwebsocket as W3CWebSocket} from \"websocket\";\nimport send from \"./images/send.svg\";\nimport MessageForm from \"./MessageForm\";\nimport {\n  set_current_messages,\n  clear_current_messages,\n  set_all_messages_read,\n  set_all_messages_unread,\n} from \"../../../redux/actions/chatActions\";\nimport MessagesList from \"./MessagesList\";\n\nconst Messages = ({\n                    current_room,\n                    set_current_messages,\n                    clear_current_messages,\n                    set_all_messages_read,\n                    set_all_messages_unread,\n                  }) => {\n\n  const client = current_room ?\n    new W3CWebSocket(`wss://traveler.market/ws/chat/${current_room}/?token=${localStorage.getItem('access')}`)\n    :\n    null\n  ;\n\n  useEffect(() => {\n    return () => {\n      clear_current_messages()\n      client?.close()\n    }\n  })\n\n  useEffect(() => {\n    if (client) {\n      client.onopen = () => {\n        console.log('WebSocket Client Connected');\n      };\n\n      client.onclose = () => {\n        console.log('WebSocket Client Disconnected');\n      };\n\n      client.onerror = (e) => {\n        console.error(e);\n        console.log('Connection Error');\n      };\n\n      client.onmessage = (e) => {\n        const dataFromServer = JSON.parse(e.data);\n        // console.log('got reply!');\n        if (dataFromServer) {\n          if (dataFromServer?.command === 'set_read') {\n            set_all_messages_read()\n          } else if (dataFromServer?.command === 'set_unread') {\n            set_all_messages_unread()\n          } else {\n            set_current_messages(dataFromServer)\n          }\n        }\n      };\n    }\n  }, [client])\n\n  // console.log(current_room)\n\n\n  const handleSend = (message) => {\n    client.send(JSON.stringify({\n      message: message\n    }));\n    // set_current_messages({\n    //   author:\n    //     {\n    //       id: user.id,\n    //       avatar: user.avatar\n    //     },\n    //   message: message,\n    //   time_date: Date.now(),\n    // })\n  }\n\n  return (\n    <>\n      <div className={styles.chat_messages}>\n        <MessagesList/>\n        <div className={styles.send_button}>\n          <MessageForm action={handleSend}/>\n        </div>\n      </div>\n    </>\n  );\n};\n\nconst mapStateToProps = state => ({\n  chat_rooms: state.chat.chat_rooms,\n  current_room: state.chat.current_room,\n})\n\nconst mapDispatchToProps = {\n  set_current_messages,\n  clear_current_messages,\n  set_all_messages_read,\n  set_all_messages_unread,\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Messages)","import React, {useEffect} from 'react';\nimport styles from './Chat.module.css';\nimport wallpaper from \"../../Blog/images/wallpaper.png\";\nimport {truncateText} from \"../../../functions\";\nimport {connect} from \"react-redux\";\nimport {set_users_online} from \"../../../redux/actions/chatActions\";\n\nconst ContactCard = ({room, action, active = false, first = false, users_online, set_users_online, }) => {\n\n  const {\n    id,\n    last_message,\n  } = room\n\n  const {\n    avatar,\n    first_name,\n    last_name,\n    last_message_date,\n    is_online,\n  } = room.room_members[0]\n\n  const user_id = room.room_members[0].id\n\n  useEffect(() => {\n    if(is_online && user_id){\n      set_users_online(user_id)\n    }\n  }, [is_online, user_id])\n\n  console.log(user_id)\n\n  const handleClick = () => {\n    action(id)\n  }\n\n  return (\n    <>\n      <div className={`${styles.chat_contact_card} ${active ? styles.active : ''} ${first ? styles.first : ''}`} onClick={handleClick}>\n        <div className={styles.chat_contact_wrapper}>\n          <div className={`${styles.chat_contact_avatar}${users_online?.includes(user_id) ? ' ' + styles.active_user : ''}`} style={{backgroundImage: `url(${avatar})`}}/>\n          <div className={styles.chat_contact_data}>\n            <div className={styles.chat_contact_name}>{first_name + ' ' + last_name[0]}</div>\n            <div className={styles.chat_contact_last_message}>{truncateText(room?.last_message, 20)}</div>\n          </div>\n        </div>\n        <div className={styles.chat_contact_last_message_date}>{last_message_date}</div>\n      </div>\n    </>\n  );\n};\n\nconst mapStateToProps = state => ({\n  users_online: state.chat.users_online\n})\n\nexport default connect(mapStateToProps, {set_users_online})(ContactCard)","import React from 'react';\nimport styles from './Chat.module.css';\nimport ContactCard from \"./ContactCard\";\nimport {connect} from \"react-redux\";\nimport {\n  set_current_room,\n  delete_chat_user,\n  clear_current_room,\n  set_all_messages_unread,\n} from \"../../../redux/actions/chatActions\";\n\nconst ContactsList = ({\n                        chat_rooms,\n                        current_room,\n                        set_current_room,\n                        delete_chat_user,\n                        clear_current_room,\n                        set_all_messages_unread,\n                      }) => {\n  const handleCurrentRoom = (id) => {\n    delete_chat_user()\n    clear_current_room()\n    set_all_messages_unread()\n    set_current_room(id)\n  }\n  return (\n    <>\n      <div className={styles.chat_contacts}>\n        {chat_rooms?.map((i, n) => <ContactCard key={n} room={i} action={handleCurrentRoom} active={current_room === i.id} first={n === 0}/>)}\n      </div>\n    </>\n  );\n};\n\nconst mapStateToProps = state => ({\n  chat_rooms: state.chat.chat_rooms,\n  current_room: state.chat.current_room,\n})\n\nexport default connect(mapStateToProps, {\n  set_current_room,\n  delete_chat_user,\n  clear_current_room,\n  set_all_messages_unread,\n})(ContactsList);","import React, {useEffect, useRef, useState} from 'react'\nimport styles from './Chat.module.css'\nimport {connect} from 'react-redux'\nimport Account from \"../../../layouts/account/account\";\nimport {\n  clear_current_room,\n  delete_chat_user,\n  get_chat_rooms,\n  set_all_messages_unread,\n} from \"../../../redux/actions/chatActions\";\nimport Messages from \"./Messages\";\nimport ContactsList from \"./ContactsList\";\n\nconst Chat = ({get_chat_rooms, delete_chat_user, clear_current_room, set_all_messages_unread}) => {\n\n  useEffect(() => {\n    window.scrollTo(0, 0)\n  }, [])\n\n  useEffect(() => {\n    get_chat_rooms()\n    return () => {\n      delete_chat_user()\n      clear_current_room()\n      set_all_messages_unread()\n    }\n  }, [])\n\n  return (\n    <>\n      <Account title='Чат' menu_item='chat'>\n\n        <div className={styles.chat_wrapper}>\n          <ContactsList/>\n          <Messages/>\n        </div>\n\n      </Account>\n    </>\n  )\n}\n\nconst mapDispatchToProps = {get_chat_rooms, delete_chat_user, clear_current_room, set_all_messages_unread}\n\nexport default connect(null, mapDispatchToProps)(Chat)","import Chat from './Chat'\n\nexport default Chat"],"names":["connect","state","isAuthenticated","auth","user","status","page","tour","tours","current_tour","load_user","openSecondaryMenu","title","subtitle","menu_item","children","console","log","to","secondary","useState","useEffect","name","content","rel","href","className","style","textDecoration","pointerEvents","all_messages_read","chat","is_read","styles","src","read","read_not","alt","data","author","user_id","isMine","setIsMine","id","Date","time_date","backgroundImage","avatar","first_name","last_name","created_at","dangerouslySetInnerHTML","__html","message","action","textareaRef","useRef","current","setMessage","onSubmit","e","preventDefault","ref","placeholder","onChange","target","value","type","send","current_messages","scrollRef","addEventListener","event","currentTarget","scroll","top","scrollHeight","behavior","map","i","n","mapDispatchToProps","set_current_messages","clear_current_messages","set_all_messages_read","set_all_messages_unread","chat_rooms","current_room","client","W3CWebSocket","localStorage","getItem","close","onopen","onclose","onerror","error","onmessage","dataFromServer","JSON","parse","command","stringify","users_online","set_users_online","room","active","first","last_message","room_members","last_message_date","is_online","onClick","includes","truncateText","set_current_room","delete_chat_user","clear_current_room","handleCurrentRoom","get_chat_rooms","window","scrollTo"],"sourceRoot":""}