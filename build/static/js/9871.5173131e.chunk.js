"use strict";(self.webpackChunkyour_app=self.webpackChunkyour_app||[]).push([[9871],{1328:function(e,r,t){t.d(r,{Z:function(){return V}});var i=t(5861),a=t(885),s=t(7757),n=t.n(s),o=t(2791),_={preview_wrapper:"Tour_preview_wrapper__hzV+e",tour_body:"Tour_tour_body__Z9ac4",preview_breadcrumbs:"Tour_preview_breadcrumbs__fLyKM",tour_sidebar:"Tour_tour_sidebar__2fQeV",tour_sidebar_body:"Tour_tour_sidebar_body__B9Tep",tour_sidebar_header:"Tour_tour_sidebar_header__7tSSr",tour_sidebar_main:"Tour_tour_sidebar_main__etFbR",guarantied_row:"Tour_guarantied_row__6rff0",guarantied_row_guarantied:"Tour_guarantied_row_guarantied__v1pQd",guarantied_row_guarantied_icon:"Tour_guarantied_row_guarantied_icon__bfmYU",guarantied_row_guarantied_text:"Tour_guarantied_row_guarantied_text__9nkpg",price_row:"Tour_price_row__1d8A3",price_row_total_price:"Tour_price_row_total_price__VMjBF",price_row_total_price_total:"Tour_price_row_total_price_total__odbiV",price_row_total_price_discounted:"Tour_price_row_total_price_discounted__-chgf",price_row_daily_price:"Tour_price_row_daily_price__crhxq",price_comment_row:"Tour_price_comment_row__RCkpQ",price_comment_row_more:"Tour_price_comment_row_more__lTx6M",duration_row:"Tour_duration_row__f4Z89",duration_row_col:"Tour_duration_row_col__me4V6",duration_row_icon:"Tour_duration_row_icon__+rNt8",duration_row_text:"Tour_duration_row_text__ZGiQP",duration_row_text_title:"Tour_duration_row_text_title__JrBKF",duration_row_text_data:"Tour_duration_row_text_data__3K2zX",inputs_row:"Tour_inputs_row__BicAy",inputs_row_date_input:"Tour_inputs_row_date_input__punHg",calendar:"Tour_calendar__NaPyA",inputs_row_date_input_text:"Tour_inputs_row_date_input_text__cdHWA",inputs_row_date_input_button:"Tour_inputs_row_date_input_button__IVgSG",inputs_row_date_input_button_minus:"Tour_inputs_row_date_input_button_minus__Ta8JW",inputs_row_button:"Tour_inputs_row_button__o31YK",footer_row_button:"Tour_footer_row_button__4DtcM",inputs_row_text:"Tour_inputs_row_text__DkJJ1",inputs_row_text_heading:"Tour_inputs_row_text_heading__814oP",inputs_row_text_text:"Tour_inputs_row_text_text__jKJBd",tour_sidebar_footer:"Tour_tour_sidebar_footer__BjglX",footer_row_leader:"Tour_footer_row_leader__K+cGy",footer_row_leader_image:"Tour_footer_row_leader_image__xT3Zj",footer_row_leader_leader:"Tour_footer_row_leader_leader__5-W2X",footer_row_leader_name:"Tour_footer_row_leader_name__C3idC",footer_row_leader_rating:"Tour_footer_row_leader_rating__218-t",divider:"Tour_divider__LOuKv"},c=t(364),d=t(7258),u=t(3239),l=t(4554),p=t(4859),m=t(1566),x=t(6531),h=t(2057),w=t(8458),v=t(5417),g=t(6043),j=t(9869),f=t(3165),b=t(5473),y=t(4669),N=t(4768),T=t(140),k=t(8382),Z=t(9566),C=t(9741),S=t(7571),A=t(7538),F=t(6269),I=t(8156),J=t(3618),B=(t(2947),t(3924)),R=t(2018),L=t(4569),K=t.n(L),z=t(184),M={getTourReview:d.R_,add_chat_room:B.q$},V=(0,c.$j)((function(e){return{tour_preview:e.tours.tour_preview,isAuthenticated:e.auth.isAuthenticated}}),M)((function(e){var r=e.tour_preview,t=e.add_chat_room,s=e.isAuthenticated,c=(0,S.k6)(),d=(0,o.useState)(1),B=(0,a.Z)(d,2),L=B[0],M=B[1],V=function(){t(r.expert.id),c.push(s?"/account/chat":"/login/chat")},W=function(){var e=(0,i.Z)(n().mark((function e(){var t,i,a;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={headers:{"Content-Type":"application/json",Authorization:"JWT ".concat(localStorage.getItem("access")),Accept:"application/json"}},i=JSON.stringify({travelers_number:L,tour:r.id}),e.prev=2,e.next=5,K().post("".concat("https://traveler.market","/api/orders/"),i,t);case 5:(a=e.sent)&&c.push("/account/orders/".concat(a.data.id,"/payment")),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),console.error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(){return e.apply(this,arguments)}}(),q=function(){var e=(0,o.useState)(!1),t=(0,a.Z)(e,2),i=t[0],s=t[1];return r&&r.price_comment&&r.price_comment&&(0,z.jsx)(z.Fragment,{children:r&&r.price_comment&&r.price_comment.length<=23?(0,z.jsx)("div",{children:r.price_comment}):(0,z.jsx)(z.Fragment,{children:i?(0,z.jsxs)("div",{children:[r.price_comment+" ",(0,z.jsxs)("div",{className:_.price_comment_row_more,onClick:function(){return s(!1)},children:[" ","\u0441\u043a\u0440\u044b\u0442\u044c"]})]}):(0,z.jsxs)("div",{children:[r.price_comment.slice(0,23)+" ",(0,z.jsxs)("div",{className:_.price_comment_row_more,onClick:function(){return s(!0)},children:[" ","\u043f\u043e\u0434\u0440\u043e\u0431\u043d\u0435\u0435..."]})]})})})};return(0,z.jsxs)(z.Fragment,{children:[r&&(0,z.jsxs)(z.Fragment,{children:[r.wallpaper&&(0,z.jsx)(p.Z,{image:r.wallpaper}),(0,z.jsx)("div",{className:"wrapper",children:(0,z.jsxs)("div",{className:_.preview_wrapper,children:[(0,z.jsxs)("div",{className:_.tour_body,children:[(0,z.jsxs)("div",{className:_.preview_breadcrumbs,children:[(0,z.jsx)(C.rU,{to:"/",children:"\u0413\u043b\u0430\u0432\u043d\u0430\u044f"})," -",(0,z.jsx)(C.rU,{to:"/tours",children:"\u041f\u0443\u0442\u0435\u0448\u0435\u0441\u0442\u0432\u0438\u044f"})," -",(0,z.jsx)("span",{children:"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440 \u0442\u0443\u0440\u0430"})]}),r.name&&(0,z.jsx)(m.Z,{title:r.name,rating:r.rating,reviews:r.reviews_count}),r.start_country&&(0,z.jsx)(x.Z,{country:r.start_country,region:r.start_russian_region?r.start_russian_region:r.start_city}),r.basic_type&&(0,z.jsx)(h.Z,{main_type:r.basic_type,extra_types:r.additional_types}),(0,z.jsx)(w.Z,{comfort:r.comfort_level,difficulty:r.difficulty_level,language:r.languages,age:r.age_starts+"-"+r.age_ends}),(0,z.jsx)("div",{className:_.divider}),r.main_impressions&&r.main_impressions.length>0&&(0,z.jsx)(v.Z,{impressions:r.main_impressions}),(r.plan&&r.plan.length>0||r.media_link)&&(0,z.jsx)(g.Z,{text:r.description,activities:r.plan,video:r&&r.media_link?r.media_link:""}),r.tour_images&&r.tour_images.length>0&&(0,z.jsx)(j.Z,{gallery:r.tour_images}),r.start_date&&r.start_city&&(0,z.jsx)(f.Z,{ya_map:r&&r.map,start_date:r&&r.start_date,start_city:r&&r.start_city,start_time:r&&r.start_time,finish_date:r&&r.finish_date,finish_city:r&&r.finish_city,finish_time:r&&r.finish_time}),Array.isArray(r.tour_days)&&(0,z.jsx)(b.Z,{days:r&&r.tour_days}),(Array.isArray(r.tour_property_types)||Array.isArray(r.tour_property_images))&&(0,z.jsx)(y.Z,{property_types:r.tour_property_types,images:r.tour_property_images}),(r.tour_included_services&&r.tour_included_services.length>0||r.tour_excluded_services&&r.tour_excluded_services.length>0)&&(0,z.jsx)(N.Z,{inclusions:r.tour_included_services,exclusions:r.tour_excluded_services}),r.air_tickets&&(0,z.jsx)(T.Z,{start_date:r&&r.start_date,start_city:r&&r.start_city,start_time:r&&r.start_time,finish_date:r&&r.finish_date,finish_city:r&&r.finish_city,finish_time:r&&r.finish_time,text:r&&r.air_tickets}),r.tour_addetional_services&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)("h3",{children:"\u0414\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u0443\u0441\u043b\u0443\u0433\u0438"}),(0,z.jsx)("div",{style:{marginTop:"20px"},children:r&&r.tour_addetional_services&&r.tour_addetional_services.map((function(e,t){return(0,z.jsx)("div",{style:{marginBottom:"10px"},dangerouslySetInnerHTML:{__html:"".concat(e.extra_text," ").concat(e.extra_service_price?" - "+e.extra_service_price+r.currency.sign:"")}},t)}))})]}),(r.guest_requirements||r.take_with||r.key_features||r.new_to_see)&&(0,z.jsx)(Z.Z,{guest_requirements:r.guest_requirements,take_with:r.take_with,key_features:r.key_features,new_to_see:r.new_to_see}),r.team_member&&(0,z.jsx)(k.Z,{leader:r.team_member,action:V})]}),(0,z.jsxs)("div",{className:_.tour_sidebar_body,style:{position:"sticky",top:"30px"},children:[(0,z.jsxs)("div",{className:_.tour_sidebar_header,children:[(0,z.jsx)(C.rU,{to:"/register",children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u0443\u0439\u0442\u0435\u0441\u044c!"}),(0,z.jsx)("span",{children:"\u0418 \u043d\u0430\u0447\u043d\u0438\u0442\u0435 \u043f\u0443\u0442\u0435\u0448\u0435\u0441\u0442\u0432\u043e\u0432\u0430\u0442\u044c \u043f\u043e \u043d\u043e\u0432\u043e\u043c\u0443!"})]}),(0,z.jsxs)("div",{className:_.tour_sidebar_main,children:[(0,z.jsxs)("div",{className:_.guarantied_row,children:[(0,z.jsxs)("div",{className:_.guarantied_row_guarantied,children:[(0,z.jsx)("div",{className:_.guarantied_row_guarantied_icon,children:(0,z.jsx)("img",{src:A.Z,alt:"Ok"})}),(0,z.jsxs)("div",{className:_.guarantied_row_guarantied_text,children:["\u0422\u0443\u0440 \u043f\u0440\u043e\u0432\u0435\u0440\u0435\u043d"," ",r.is_guaranteed?"\u0438 \u0433\u0430\u0440\u0430\u043d\u0442\u0438\u0440\u043e\u0432\u0430\u043d":""]})]}),(0,z.jsx)("div",{className:_.guarantied_row_guarantied_favourite,children:(0,z.jsx)("img",{src:F.Z,alt:"heart"})})]}),r.price&&(0,z.jsxs)("div",{className:_.price_row,children:[r&&r.price&&(0,z.jsxs)("div",{className:_.price_row_total_price,children:[r&&r.discounted_price&&(0,z.jsxs)("div",{className:_.price_row_total_price_total,children:[r&&r.price&&r.price.toLocaleString("ru")," ",(0,z.jsx)("span",{className:"rub-sign",children:"\u20bd"})]}),(0,z.jsxs)("div",{className:_.price_row_total_price_discounted,children:[(r&&r.discounted_price?r.discounted_price:r.price).toLocaleString("ru")," ",(0,z.jsx)("span",{className:"rub-sign",children:"\u20bd"})]})]}),r&&r.daily_price&&(0,z.jsxs)("div",{className:_.price_row_daily_price,children:["\u0432 \u0434\u0435\u043d\u044c"," ",r&&r.daily_price&&(r.daily_price*L).toLocaleString("ru")," ",(0,z.jsx)("span",{className:"rub-sign",children:"\u20bd"})]})]}),(0,z.jsx)("div",{className:_.price_comment_row,children:(0,z.jsx)(q,{})}),(r.duration||r.vacants_number||r.members_number)&&(0,z.jsxs)("div",{className:_.duration_row,children:[(0,z.jsxs)("div",{className:_.duration_row_col,children:[(0,z.jsx)("div",{className:_.duration_row_icon,children:(0,z.jsx)("img",{src:I.Z,alt:"stopwatch"})}),(0,z.jsxs)("div",{className:_.duration_row_text,children:[(0,z.jsx)("div",{className:_.duration_row_text_title,children:"\u0414\u043b\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c:"}),(0,z.jsxs)("div",{className:_.duration_row_text_data,children:[r.duration," ","\u0434\u043d\u0435\u0439"]})]})]}),(0,z.jsxs)("div",{className:_.duration_row_col,children:[(0,z.jsx)("div",{className:_.duration_row_icon,children:(0,z.jsx)("img",{src:J.Z,alt:"group"})}),(0,z.jsxs)("div",{className:_.duration_row_text,children:[(0,z.jsx)("div",{className:_.duration_row_text_title,children:"\u0421\u0432\u043e\u0431\u043e\u0434\u043d\u043e \u043c\u0435\u0441\u0442:"}),(0,z.jsxs)("div",{className:_.duration_row_text_data,children:[r.vacants_number," ","\u0438\u0437"," ",r.members_number]})]})]})]}),(0,z.jsx)("div",{className:_.inputs_row,children:(0,z.jsxs)("div",{className:_.inputs_row_date_input,children:[(0,z.jsx)("div",{className:_.inputs_row_date_input_button_minus,onClick:function(){L>1&&M(L-1)},children:"\u2014"}),(0,z.jsxs)("div",{className:_.inputs_row_date_input_text,children:["\u041c\u0435\u0441\u0442:"," ",L]}),(0,z.jsx)("div",{className:_.inputs_row_date_input_button,onClick:function(){L<r.vacants_number&&M(L+1)},children:"+"})]})}),(0,z.jsx)("div",{className:_.inputs_row_button,onClick:W,children:r.is_guaranteed?"\u0417\u0430\u0431\u0440\u043e\u043d\u0438\u0440\u043e\u0432\u0430\u0442\u044c":"\u0425\u043e\u0447\u0443 \u043f\u043e\u0435\u0445\u0430\u0442\u044c"}),(0,z.jsxs)("div",{className:_.inputs_row_text,children:[r&&r.book_price&&(0,z.jsxs)("div",{className:_.inputs_row_text_heading,children:["\u0414\u043b\u044f \u0431\u0440\u043e\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f \u0442\u0443\u0440\u0430 \u0434\u043e\u0441\u0442\u0430\u0442\u043e\u0447\u043d\u043e ",r&&r.book_price&&(r.book_price*L).toLocaleString("ru"),(0,z.jsx)("span",{className:"rub-sign",children:"\u20bd"})]}),(0,z.jsx)("div",{className:_.inputs_row_text_text,children:"\u041f\u0440\u0438 \u043e\u0442\u043c\u0435\u043d\u0435 \u0431\u0440\u043e\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f \u043b\u044e\u0431\u043e\u0433\u043e \u043f\u0443\u0442\u0435\u0448\u0435\u0441\u0442\u0432\u0438\u044f \u0432 \u0442\u0435\u0447\u0435\u043d\u0438\u0435 24 \u0447\u0430\u0441\u043e\u0432 \u043f\u043e\u0441\u043b\u0435 \u043e\u043f\u043b\u0430\u0442\u044b \u0432\u044b \u043f\u043e\u043b\u0443\u0447\u0430\u0435\u0442\u0435 \u043f\u043e\u043b\u043d\u044b\u0439 \u0432\u043e\u0437\u0432\u0440\u0430\u0442."})]})]}),(0,z.jsxs)("div",{className:_.tour_sidebar_footer,children:[r.expert&&(0,z.jsx)("div",{className:_.footer_row_leader,children:(0,z.jsx)(R.Z,{reviews:r.expert.tour_reviews_count,name:r.expert.first_name,rating:r.expert.rating,id:r.expert.id,avatar:r.expert.tmb_avatar,extra:", \u0410\u0432\u0442\u043e\u0440 \u0442\u0443\u0440\u043e\u0432"})}),(0,z.jsx)("div",{className:_.footer_row_button,onClick:V,children:"\u041d\u0430\u043f\u0438\u0441\u0430\u0442\u044c \u0430\u0432\u0442\u043e\u0440\u0443 \u0442\u0443\u0440\u0430"})]})]})]})})]}),!r&&(0,z.jsx)(l.Z,{sx:{display:"flex",width:"100%",justifyContent:"center",alignItems:"center",height:"300px"},children:(0,z.jsx)(u.Z,{})})]})}))},9871:function(e,r,t){t.r(r),t.d(r,{default:function(){return v}});var i=t(2791),a=t(364),s=t(5861),n=t(885),o=t(7757),_=t.n(o),c=(t(4918),t(863),t(4047),t(8324)),d=t(7258),u=t(4569),l=t.n(u),p=t(184),m={getTourReview:d.R_},x=(0,a.$j)((function(e){return{tour:e.tours.tour_preview}}),m)((function(e){var r,t=e.children,a=(e.page,e.background),o=void 0===a?"transparent":a,d=e.tour_id,u=e.tour,m=(0,i.useState)(""),x=(0,n.Z)(m,2),h=x[0],w=x[1],v=(0,i.useState)(!1),g=(0,n.Z)(v,2),j=g[0],f=g[1],b=function(){f(!0)},y=function(){var e=(0,s.Z)(_().mark((function e(){var r,t;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={headers:{"Content-Type":"application/json",Authorization:"JWT ".concat(localStorage.getItem("admin_access")),Accept:"application/json"}},t=JSON.stringify({reason:h}),e.prev=2,e.next=5,l().patch("".concat("https://traveler.market","/api/tours/").concat(d,"/decline/\n"),t,r);case 5:window.location.replace("".concat("https://traveler.market","/admin/tours/moderatedtour/")),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(){return e.apply(this,arguments)}}(),N=function(){var e=(0,s.Z)(_().mark((function e(){var r;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={headers:{"Content-Type":"application/json",Authorization:"JWT ".concat(localStorage.getItem("admin_access")),Accept:"application/json"}},null,e.prev=2,e.next=5,l().patch("".concat("https://traveler.market","/api/tours/").concat(d,"/approve/ \n"),null,r);case 5:window.location.replace("".concat("https://traveler.market","/admin/tours/moderatedtour/")),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(){return e.apply(this,arguments)}}();return(0,p.jsx)(p.Fragment,{children:(0,p.jsxs)("section",{children:[j&&(0,p.jsx)(c.Z,{status:"danger",title:"\u041d\u0430\u043f\u0438\u0448\u0438\u0442\u0435 \u043f\u0440\u0438\u0447\u0438\u043d\u0443 \u043e\u0442\u043a\u0430\u0437\u0430",button:"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c",button2:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c",with_field:!0,action:y,input_action:function(e){w(e.target.value)},input_value:h,second_action:function(){return f(!1)},min_width:"500px"}),(0,p.jsxs)("div",{className:"wrapper",children:[(0,p.jsx)("div",{className:"global-h2-heading",style:{marginTop:"50px"},children:(0,p.jsx)("h2",{children:"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440 \u0442\u0443\u0440\u0430"})}),(0,p.jsxs)("div",{className:"control-buttons",children:[(0,p.jsx)("div",{className:"control-buttons-set"}),(0,p.jsxs)("div",{className:"control-buttons-set",children:[(0,p.jsx)("button",{className:"button-green",onClick:N,children:"\u041f\u0440\u0438\u043d\u044f\u0442\u044c"}),(0,p.jsx)("button",{className:"button-red",onClick:b,children:"\u041e\u0442\u043a\u043b\u043e\u043d\u0438\u0442\u044c"})]})]}),(null===u||void 0===u?void 0:u.decline_reasons)&&(0,p.jsxs)("div",{className:"control-buttons",style:{flexDirection:"column"},children:[(0,p.jsx)("h2",{style:{color:"#DF7070",marginBottom:"10px"},children:"\u041e\u0442\u043a\u0430\u0437 \u043f\u0443\u0431\u043b\u0438\u043a\u0430\u0446\u0438\u0438 \u0442\u0443\u0440\u0430!"}),(0,p.jsx)("h3",{style:{marginBottom:"10px"},children:"\u041f\u0440\u0438\u0447\u0438\u043d\u044b:"}),(0,p.jsx)("div",{dangerouslySetInnerHTML:{__html:null===u||void 0===u||null===(r=u.decline_reasons)||void 0===r?void 0:r.replace(/\n/g,"<br />")}})]})]}),(0,p.jsx)("main",{style:{backgroundColor:o,zIndex:"0"},children:t}),(0,p.jsx)("div",{className:"wrapper",children:(0,p.jsxs)("div",{className:"control-buttons bottom",children:[(0,p.jsx)("div",{className:"control-buttons-set"}),(0,p.jsxs)("div",{className:"control-buttons-set",children:[(0,p.jsx)("button",{className:"button-green",onClick:N,children:"\u041f\u0440\u0438\u043d\u044f\u0442\u044c"}),(0,p.jsx)("button",{className:"button-red",onClick:b,children:"\u041e\u0442\u043a\u043b\u043e\u043d\u0438\u0442\u044c"})]})]})})]})})})),h=t(1328),w={getTourReview:d.R_},v=(0,a.$j)((function(e){return{}}),w)((function(e){var r=e.location,t=e.match,a=e.getTourReview;(0,i.useEffect)((function(){if(t)return a(t.params.id),function(){a(t.params.id,"reset"),localStorage.removeItem("admin_access")}}),[t]),console.log(null===t||void 0===t?void 0:t.params.id),console.log(r.search.split("=")[1]);var s=r.search.split("=")[1];return localStorage.setItem("admin_access",s),(0,p.jsx)(p.Fragment,{children:(0,p.jsx)(x,{tour_id:null===t||void 0===t?void 0:t.params.id,children:(0,p.jsx)(h.Z,{})})})}))}}]);
//# sourceMappingURL=9871.5173131e.chunk.js.map