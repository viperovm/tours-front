"use strict";(self.webpackChunkyour_app=self.webpackChunkyour_app||[]).push([[6382],{1328:function(e,r,t){t.d(r,{Z:function(){return I}});var _=t(5861),i=t(885),a=t(7757),s=t.n(a),o=t(2791),n={preview_wrapper:"Tour_preview_wrapper__hzV+e",tour_body:"Tour_tour_body__Z9ac4",preview_breadcrumbs:"Tour_preview_breadcrumbs__fLyKM",tour_sidebar:"Tour_tour_sidebar__2fQeV",tour_sidebar_body:"Tour_tour_sidebar_body__B9Tep",tour_sidebar_header:"Tour_tour_sidebar_header__7tSSr",tour_sidebar_main:"Tour_tour_sidebar_main__etFbR",guarantied_row:"Tour_guarantied_row__6rff0",guarantied_row_guarantied:"Tour_guarantied_row_guarantied__v1pQd",guarantied_row_guarantied_icon:"Tour_guarantied_row_guarantied_icon__bfmYU",guarantied_row_guarantied_text:"Tour_guarantied_row_guarantied_text__9nkpg",price_row:"Tour_price_row__1d8A3",price_row_total_price:"Tour_price_row_total_price__VMjBF",price_row_total_price_total:"Tour_price_row_total_price_total__odbiV",price_row_total_price_discounted:"Tour_price_row_total_price_discounted__-chgf",price_row_daily_price:"Tour_price_row_daily_price__crhxq",price_comment_row:"Tour_price_comment_row__RCkpQ",price_comment_row_more:"Tour_price_comment_row_more__lTx6M",duration_row:"Tour_duration_row__f4Z89",duration_row_col:"Tour_duration_row_col__me4V6",duration_row_icon:"Tour_duration_row_icon__+rNt8",duration_row_text:"Tour_duration_row_text__ZGiQP",duration_row_text_title:"Tour_duration_row_text_title__JrBKF",duration_row_text_data:"Tour_duration_row_text_data__3K2zX",inputs_row:"Tour_inputs_row__BicAy",inputs_row_date_input:"Tour_inputs_row_date_input__punHg",calendar:"Tour_calendar__NaPyA",inputs_row_date_input_text:"Tour_inputs_row_date_input_text__cdHWA",inputs_row_date_input_button:"Tour_inputs_row_date_input_button__IVgSG",inputs_row_date_input_button_minus:"Tour_inputs_row_date_input_button_minus__Ta8JW",inputs_row_button:"Tour_inputs_row_button__o31YK",footer_row_button:"Tour_footer_row_button__4DtcM",inputs_row_text:"Tour_inputs_row_text__DkJJ1",inputs_row_text_heading:"Tour_inputs_row_text_heading__814oP",inputs_row_text_text:"Tour_inputs_row_text_text__jKJBd",tour_sidebar_footer:"Tour_tour_sidebar_footer__BjglX",footer_row_leader:"Tour_footer_row_leader__K+cGy",footer_row_leader_image:"Tour_footer_row_leader_image__xT3Zj",footer_row_leader_leader:"Tour_footer_row_leader_leader__5-W2X",footer_row_leader_name:"Tour_footer_row_leader_name__C3idC",footer_row_leader_rating:"Tour_footer_row_leader_rating__218-t",divider:"Tour_divider__LOuKv"},c=t(364),d=t(7258),u=t(3239),l=t(4554),p=t(4859),m=t(1566),x=t(6531),w=t(2057),h=t(8458),g=t(5417),v=t(6043),j=t(9869),f=t(3165),y=t(5473),b=t(4669),T=t(4768),N=t(140),k=t(8382),Z=t(9566),A=t(9741),C=t(7571),S=t(7538),F=t(6269),B=t(8156),J=t(3618),K=(t(2947),t(3924)),L=t(2018),R=t(4569),M=t.n(R),V=t(184),q={getTourReview:d.R_,add_chat_room:K.q$},I=(0,c.$j)((function(e){return{tour_preview:e.tours.tour_preview,isAuthenticated:e.auth.isAuthenticated}}),q)((function(e){var r=e.tour_preview,t=e.add_chat_room,a=e.isAuthenticated,c=(0,C.k6)(),d=(0,o.useState)(1),K=(0,i.Z)(d,2),R=K[0],q=K[1],I=function(){t(r.expert.id),c.push(a?"/account/chat":"/login/chat")},P=function(){var e=(0,_.Z)(s().mark((function e(){var t,_,i;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={headers:{"Content-Type":"application/json",Authorization:"JWT ".concat(localStorage.getItem("access")),Accept:"application/json"}},_=JSON.stringify({travelers_number:R,tour:r.id}),e.prev=2,e.next=5,M().post("".concat("https://traveler.market","/api/orders/"),_,t);case 5:(i=e.sent)&&c.push("/account/orders/".concat(i.data.id,"/payment")),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),console.error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(){return e.apply(this,arguments)}}(),Q=function(){var e=(0,o.useState)(!1),t=(0,i.Z)(e,2),_=t[0],a=t[1];return r&&r.price_comment&&r.price_comment&&(0,V.jsx)(V.Fragment,{children:r&&r.price_comment&&r.price_comment.length<=23?(0,V.jsx)("div",{children:r.price_comment}):(0,V.jsx)(V.Fragment,{children:_?(0,V.jsxs)("div",{children:[r.price_comment+" ",(0,V.jsxs)("div",{className:n.price_comment_row_more,onClick:function(){return a(!1)},children:[" ","\u0441\u043a\u0440\u044b\u0442\u044c"]})]}):(0,V.jsxs)("div",{children:[r.price_comment.slice(0,23)+" ",(0,V.jsxs)("div",{className:n.price_comment_row_more,onClick:function(){return a(!0)},children:[" ","\u043f\u043e\u0434\u0440\u043e\u0431\u043d\u0435\u0435..."]})]})})})};return(0,V.jsxs)(V.Fragment,{children:[r&&(0,V.jsxs)(V.Fragment,{children:[r.wallpaper&&(0,V.jsx)(p.Z,{image:r.wallpaper}),(0,V.jsx)("div",{className:"wrapper",children:(0,V.jsxs)("div",{className:n.preview_wrapper,children:[(0,V.jsxs)("div",{className:n.tour_body,children:[(0,V.jsxs)("div",{className:n.preview_breadcrumbs,children:[(0,V.jsx)(A.rU,{to:"/",children:"\u0413\u043b\u0430\u0432\u043d\u0430\u044f"})," -",(0,V.jsx)(A.rU,{to:"/tours",children:"\u041f\u0443\u0442\u0435\u0448\u0435\u0441\u0442\u0432\u0438\u044f"})," -",(0,V.jsx)("span",{children:"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440 \u0442\u0443\u0440\u0430"})]}),r.name&&(0,V.jsx)(m.Z,{title:r.name,rating:r.rating,reviews:r.reviews_count}),r.start_country&&(0,V.jsx)(x.Z,{country:r.start_country,region:r.start_russian_region?r.start_russian_region:r.start_city}),r.basic_type&&(0,V.jsx)(w.Z,{main_type:r.basic_type,extra_types:r.additional_types}),(0,V.jsx)(h.Z,{comfort:r.comfort_level,difficulty:r.difficulty_level,language:r.languages,age:r.age_starts+"-"+r.age_ends}),(0,V.jsx)("div",{className:n.divider}),r.main_impressions&&r.main_impressions.length>0&&(0,V.jsx)(g.Z,{impressions:r.main_impressions}),(r.plan&&r.plan.length>0||r.media_link)&&(0,V.jsx)(v.Z,{text:r.description,activities:r.plan,video:r&&r.media_link?r.media_link:""}),r.tour_images&&r.tour_images.length>0&&(0,V.jsx)(j.Z,{gallery:r.tour_images}),r.start_date&&r.start_city&&(0,V.jsx)(f.Z,{ya_map:r&&r.map,start_date:r&&r.start_date,start_city:r&&r.start_city,start_time:r&&r.start_time,finish_date:r&&r.finish_date,finish_city:r&&r.finish_city,finish_time:r&&r.finish_time}),Array.isArray(r.tour_days)&&(0,V.jsx)(y.Z,{days:r&&r.tour_days}),(Array.isArray(r.tour_property_types)||Array.isArray(r.tour_property_images))&&(0,V.jsx)(b.Z,{property_types:r.tour_property_types,images:r.tour_property_images}),(r.tour_included_services&&r.tour_included_services.length>0||r.tour_excluded_services&&r.tour_excluded_services.length>0)&&(0,V.jsx)(T.Z,{inclusions:r.tour_included_services,exclusions:r.tour_excluded_services}),r.air_tickets&&(0,V.jsx)(N.Z,{start_date:r&&r.start_date,start_city:r&&r.start_city,start_time:r&&r.start_time,finish_date:r&&r.finish_date,finish_city:r&&r.finish_city,finish_time:r&&r.finish_time,text:r&&r.air_tickets}),r.tour_addetional_services&&(0,V.jsxs)(V.Fragment,{children:[(0,V.jsx)("h3",{children:"\u0414\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u0443\u0441\u043b\u0443\u0433\u0438"}),(0,V.jsx)("div",{style:{marginTop:"20px"},children:r&&r.tour_addetional_services&&r.tour_addetional_services.map((function(e,t){return(0,V.jsx)("div",{style:{marginBottom:"10px"},dangerouslySetInnerHTML:{__html:"".concat(e.extra_text," ").concat(e.extra_service_price?" - "+e.extra_service_price+r.currency.sign:"")}},t)}))})]}),(r.guest_requirements||r.take_with||r.key_features||r.new_to_see)&&(0,V.jsx)(Z.Z,{guest_requirements:r.guest_requirements,take_with:r.take_with,key_features:r.key_features,new_to_see:r.new_to_see}),r.team_member&&(0,V.jsx)(k.Z,{leader:r.team_member,action:I})]}),(0,V.jsxs)("div",{className:n.tour_sidebar_body,style:{position:"sticky",top:"30px"},children:[(0,V.jsxs)("div",{className:n.tour_sidebar_header,children:[(0,V.jsx)(A.rU,{to:"/register",children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u0443\u0439\u0442\u0435\u0441\u044c!"}),(0,V.jsx)("span",{children:"\u0418 \u043d\u0430\u0447\u043d\u0438\u0442\u0435 \u043f\u0443\u0442\u0435\u0448\u0435\u0441\u0442\u0432\u043e\u0432\u0430\u0442\u044c \u043f\u043e \u043d\u043e\u0432\u043e\u043c\u0443!"})]}),(0,V.jsxs)("div",{className:n.tour_sidebar_main,children:[(0,V.jsxs)("div",{className:n.guarantied_row,children:[(0,V.jsxs)("div",{className:n.guarantied_row_guarantied,children:[(0,V.jsx)("div",{className:n.guarantied_row_guarantied_icon,children:(0,V.jsx)("img",{src:S.Z,alt:"Ok"})}),(0,V.jsxs)("div",{className:n.guarantied_row_guarantied_text,children:["\u0422\u0443\u0440 \u043f\u0440\u043e\u0432\u0435\u0440\u0435\u043d"," ",r.is_guaranteed?"\u0438 \u0433\u0430\u0440\u0430\u043d\u0442\u0438\u0440\u043e\u0432\u0430\u043d":""]})]}),(0,V.jsx)("div",{className:n.guarantied_row_guarantied_favourite,children:(0,V.jsx)("img",{src:F.Z,alt:"heart"})})]}),r.price&&(0,V.jsxs)("div",{className:n.price_row,children:[r&&r.price&&(0,V.jsxs)("div",{className:n.price_row_total_price,children:[r&&r.discounted_price&&(0,V.jsxs)("div",{className:n.price_row_total_price_total,children:[r&&r.price&&r.price.toLocaleString("ru")," ",(0,V.jsx)("span",{className:"rub-sign",children:"\u20bd"})]}),(0,V.jsxs)("div",{className:n.price_row_total_price_discounted,children:[(r&&r.discounted_price?r.discounted_price:r.price).toLocaleString("ru")," ",(0,V.jsx)("span",{className:"rub-sign",children:"\u20bd"})]})]}),r&&r.daily_price&&(0,V.jsxs)("div",{className:n.price_row_daily_price,children:["\u0432 \u0434\u0435\u043d\u044c"," ",r&&r.daily_price&&(r.daily_price*R).toLocaleString("ru")," ",(0,V.jsx)("span",{className:"rub-sign",children:"\u20bd"})]})]}),(0,V.jsx)("div",{className:n.price_comment_row,children:(0,V.jsx)(Q,{})}),(r.duration||r.vacants_number||r.members_number)&&(0,V.jsxs)("div",{className:n.duration_row,children:[(0,V.jsxs)("div",{className:n.duration_row_col,children:[(0,V.jsx)("div",{className:n.duration_row_icon,children:(0,V.jsx)("img",{src:B.Z,alt:"stopwatch"})}),(0,V.jsxs)("div",{className:n.duration_row_text,children:[(0,V.jsx)("div",{className:n.duration_row_text_title,children:"\u0414\u043b\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c:"}),(0,V.jsxs)("div",{className:n.duration_row_text_data,children:[r.duration," ","\u0434\u043d\u0435\u0439"]})]})]}),(0,V.jsxs)("div",{className:n.duration_row_col,children:[(0,V.jsx)("div",{className:n.duration_row_icon,children:(0,V.jsx)("img",{src:J.Z,alt:"group"})}),(0,V.jsxs)("div",{className:n.duration_row_text,children:[(0,V.jsx)("div",{className:n.duration_row_text_title,children:"\u0421\u0432\u043e\u0431\u043e\u0434\u043d\u043e \u043c\u0435\u0441\u0442:"}),(0,V.jsxs)("div",{className:n.duration_row_text_data,children:[r.vacants_number," ","\u0438\u0437"," ",r.members_number]})]})]})]}),(0,V.jsx)("div",{className:n.inputs_row,children:(0,V.jsxs)("div",{className:n.inputs_row_date_input,children:[(0,V.jsx)("div",{className:n.inputs_row_date_input_button_minus,onClick:function(){R>1&&q(R-1)},children:"\u2014"}),(0,V.jsxs)("div",{className:n.inputs_row_date_input_text,children:["\u041c\u0435\u0441\u0442:"," ",R]}),(0,V.jsx)("div",{className:n.inputs_row_date_input_button,onClick:function(){R<r.vacants_number&&q(R+1)},children:"+"})]})}),(0,V.jsx)("div",{className:n.inputs_row_button,onClick:P,children:r.is_guaranteed?"\u0417\u0430\u0431\u0440\u043e\u043d\u0438\u0440\u043e\u0432\u0430\u0442\u044c":"\u0425\u043e\u0447\u0443 \u043f\u043e\u0435\u0445\u0430\u0442\u044c"}),(0,V.jsxs)("div",{className:n.inputs_row_text,children:[r&&r.book_price&&(0,V.jsxs)("div",{className:n.inputs_row_text_heading,children:["\u0414\u043b\u044f \u0431\u0440\u043e\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f \u0442\u0443\u0440\u0430 \u0434\u043e\u0441\u0442\u0430\u0442\u043e\u0447\u043d\u043e ",r&&r.book_price&&(r.book_price*R).toLocaleString("ru"),(0,V.jsx)("span",{className:"rub-sign",children:"\u20bd"})]}),(0,V.jsx)("div",{className:n.inputs_row_text_text,children:"\u041f\u0440\u0438 \u043e\u0442\u043c\u0435\u043d\u0435 \u0431\u0440\u043e\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f \u043b\u044e\u0431\u043e\u0433\u043e \u043f\u0443\u0442\u0435\u0448\u0435\u0441\u0442\u0432\u0438\u044f \u0432 \u0442\u0435\u0447\u0435\u043d\u0438\u0435 24 \u0447\u0430\u0441\u043e\u0432 \u043f\u043e\u0441\u043b\u0435 \u043e\u043f\u043b\u0430\u0442\u044b \u0432\u044b \u043f\u043e\u043b\u0443\u0447\u0430\u0435\u0442\u0435 \u043f\u043e\u043b\u043d\u044b\u0439 \u0432\u043e\u0437\u0432\u0440\u0430\u0442."})]})]}),(0,V.jsxs)("div",{className:n.tour_sidebar_footer,children:[r.expert&&(0,V.jsx)("div",{className:n.footer_row_leader,children:(0,V.jsx)(L.Z,{reviews:r.expert.tour_reviews_count,name:r.expert.first_name,rating:r.expert.rating,id:r.expert.id,avatar:r.expert.tmb_avatar,extra:", \u0410\u0432\u0442\u043e\u0440 \u0442\u0443\u0440\u043e\u0432"})}),(0,V.jsx)("div",{className:n.footer_row_button,onClick:I,children:"\u041d\u0430\u043f\u0438\u0441\u0430\u0442\u044c \u0430\u0432\u0442\u043e\u0440\u0443 \u0442\u0443\u0440\u0430"})]})]})]})})]}),!r&&(0,V.jsx)(l.Z,{sx:{display:"flex",width:"100%",justifyContent:"center",alignItems:"center",height:"300px"},children:(0,V.jsx)(u.Z,{})})]})}))},6382:function(e,r,t){t.r(r),t.d(r,{default:function(){return l}});var _=t(885),i=t(2791),a=t(1642),s=t(2753),o=t(1328),n=t(364),c=t(7258),d=t(184),u={getTourReview:c.R_},l=(0,n.$j)(null,u)((function(e){var r=e.location,t=e.match,n=e.getTourReview,c=r.pathname,u=r.search,l="/"===c[0]?c.substring(1):c;console.log(u);var p=(0,i.useState)(null),m=(0,_.Z)(p,2),x=m[0],w=m[1];return(0,i.useEffect)((function(){u&&w(u.split("=")[1])})),console.log(x),(0,i.useEffect)((function(){return n(t.params.slug,x),function(){return n(t.params.slug,x,"reset")}}),[x]),(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)(a.ZP,{children:[(0,d.jsx)("title",{children:"Traveler Market - \u041c\u0430\u0440\u043a\u0435\u0442\u043f\u043b\u0435\u0439\u0441 \u0430\u0432\u0442\u043e\u0440\u0441\u043a\u0438\u0445 \u0442\u0443\u0440\u043e\u0432"}),(0,d.jsx)("meta",{name:"description",content:""})]}),(0,d.jsx)(s.Z,{page:l,children:(0,d.jsx)(o.Z,{})})]})}))}}]);
//# sourceMappingURL=6382.5458e571.chunk.js.map